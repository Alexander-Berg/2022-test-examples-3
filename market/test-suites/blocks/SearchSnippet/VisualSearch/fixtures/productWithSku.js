import {createProduct, mergeState} from '@yandex-market/kadavr/mocks/Report/helpers';

const createOfferOptions = (wareId, modelId) => ({
    'classifierMagicId': '7eb1d5ca29ffa6c1ecb35f9f5471f1c1',
    'entity': 'offer',
    'trace': {
        'fullFormulaInfo': [
            {
                'tag': 'CpcBuy',
                'name': 'MNA_DO_20190325_simple_factors_6w_shops99m_QuerySoftMax',
                'value': '0.950995',
            },
        ],
    },
    'vendor': {
        'entity': 'vendor',
        'id': 24514130,
        'name': 'DStrend',
        'slug': 'dstrend',
        'website': 'https://dstrend.ru',
        'filter': '7893318:24514130',
    },
    'titles': {
        'raw': 'Платье женское "Незабываемый вечер" 46р-р (44-50 размерный ряд) / Классическое/ Повседневное/ Офисное/ Легкое/ Романтичное',
        'highlighted': [
            {
                'value': 'Платье женское "Незабываемый вечер" 46р-р (44-50 размерный ряд) / Классическое/ Повседневное/ Офисное/ Легкое/ Романтичное',
            },
        ],
    },
    'slug': 'plate-zhenskoe-nezabyvaemyi-vecher-46r-r-44-50-razmernyi-riad-klassicheskoe-povsednevnoe-ofisnoe-legkoe-romantichnoe',
    'description': 'Роскошное платье для прекрасных девушек! Треугольный вырез подчеркивает длину шеи, от выреза идет функциональная застежка на пуговицы. Пышные рукава собраны на резинку с рюшей. Расклешенная юбка украшена воланом. В комплекте прилагается тонкий ремешок как финальный акцент. Тип ткани: ниагара Состав:100 п/э Рост 170 см Сезон: Круглогодичный Комплектация: Платье, ремешок Тип ткани: ниагара Вид застёжки: Без застежки Вырез горловины: V-образный Декоративные элементы: Оборка Длина изделия по спинке:108 Модель',
    'eligibleForBookingInUserRegion': false,
    'categories': [
        {
            'entity': 'category',
            'id': 7811901,
            'nid': 57297,
            'name': 'Платья',
            'slug': 'platia',
            'fullName': 'Женские платья',
            'type': 'guru',
            'cpaType': 'cpc_and_cpa',
            'isLeaf': true,
            'kinds': [],
        },
    ],
    'cpc': '6pbT70DjbyD8AnmjwuWs6gU82Isqhi6HkzAIOR8m2j32Qc2SkBA77cHS8-kmU3ZNYrNQcKtrW0sRtQj0vByKZvCSM6nNq0XppDvYOlvaPE2hT9-zx93_7oNMBwHpzTIG',
    'urls': {
        'direct': 'https://market.yandex.ru/product--plate-zhenskoe-nezabyvaemyi-vecher/1736272921?offerid=ZoskV0kTyBtPblags--nOA&sku=101646425520&cpc=6pbT70DjbyD8AnmjwuWs6gU82Isqhi6HkzAIOR8m2j32Qc2SkBA77cHS8-kmU3ZNYrNQcKtrW0sRtQj0vByKZvCSM6nNq0XppDvYOlvaPE2hT9-zx93_7oNMBwHpzTIG',
    },
    'navnodes': [
        {
            'entity': 'navnode',
            'id': 57297,
            'name': 'Платья и сарафаны',
            'slug': 'platia-i-sarafany',
            'fullName': 'Женские платья',
            'isLeaf': true,
            'tags': [
                'fashion',
            ],
            'rootNavnode': {},
        },
    ],
    'meta': {},
    'externalData': {},
    'wareId': wareId,
    'prices': {
        'currency': 'RUR',
        'value': '3285',
        'isDeliveryIncluded': false,
        'isPickupIncluded': false,
        'rawValue': '3285',
        'discount': {
            'oldMin': '5256',
            'percent': 38,
            'isBestDeal': true,
            'absolute': '1971',
        },
    },
    'marketSkuCreator': 'market',
    'modelAwareTitles': {
        'raw': 'Платье женское "Незабываемый вечер" 46р-р (44-50 размерный ряд) / Классическое/ Повседневное/ Офисное/ Легкое/ Романтичное',
        'highlighted': [
            {
                'value': 'Платье женское "Незабываемый вечер" 46р-р (44-50 размерный ряд) / Классическое/ Повседневное/ Офисное/ Легкое/ Романтичное',
            },
        ],
    },
    'specs': {
        'internal': [],
    },
    'model': {
        'id': modelId,
        'type': 'model',
        'opinions': 0,
        'rating': 0,
        'preciseRating': 0,
        'ratingCount': 0,
        'reviews': 0,
        'skuStats': {
            'totalCount': 1,
            'beforeFiltersCount': 1,
            'afterFiltersCount': 1,
        },
    },
    'isCutPrice': false,
    'delivery': {
        'shopPriorityRegion': {
            'entity': 'region',
            'id': 213,
            'name': 'Москва',
            'lingua': {
                'name': {
                    'genitive': 'Москвы',
                    'preposition': 'в',
                    'prepositional': 'Москве',
                    'accusative': 'Москву',
                },
            },
            'type': 6,
            'subtitle': 'Москва и Московская область, Россия',
        },
        'shopPriorityCountry': {
            'entity': 'region',
            'id': 225,
            'name': 'Россия',
            'lingua': {
                'name': {
                    'genitive': 'России',
                    'preposition': 'в',
                    'prepositional': 'России',
                    'accusative': 'Россию',
                },
            },
            'type': 3,
        },
        'isPriorityRegion': false,
        'isCountrywide': false,
        'isAvailable': false,
        'hasPickup': false,
        'hasLocalStore': false,
        'hasPost': false,
        'isForcedRegion': false,
        'isFree': false,
        'isDownloadable': false,
        'inStock': true,
        'postAvailable': true,
        'isExpress': false,
        'isEda': false,
        'options': [],
        'deliveryPartnerTypes': [],
        'betterWithPlus': false,
    },
    'cpa': 'real',
    'fee': '0.0000',
    'feeSum': '0',
    'feeShow': 'OTNDnItfwROQcHB5I9mm3RlgmSYMZ-IRRg1O8FVaFv3EMCmqV3uCOfN-D-caROGnv1IW09YBTyIpOMN0WFmSPx1KmfqK5XEzFdGHyONS9dDMT7DuxRIXOvs1Itdip2Ml',
    'shop': {
        'entity': 'shop',
        'id': 431782,
        'name': 'Яндекс.Маркет',
        'business_id': 921035,
        'business_name': 'Яндекс.Маркет',
        'slug': 'yandex-market',
        'gradesCount': 525228,
        'overallGradesCount': 525228,
        'qualityRating': 1,
        'isGlobal': false,
        'isCpaPrior': false,
        'isCpaPartner': true,
        'taxSystem': 'OSN',
        'isNewRating': true,
        'newGradesCount': 525228,
        'newQualityRating': 4.511419802,
        'newQualityRating3M': 1.498746867,
        'ratingToShow': 1.498746867,
        'ratingType': 3,
        'newGradesCount3M': 1596,
        'status': 'actual',
        'cutoff': '',
        'loyalty_program_status': 'DISABLED',
        'isEats': false,
        'logo': {
            'entity': 'picture',
            'width': 71,
            'height': 14,
            'url': '//avatars.mds.yandex.net/get-market-shop-logo/1615984/2a00000178597b92092f50ce72bad6f86dca/orig',
            'extension': 'SVG',
        },
        'feed': {
            'id': '475690',
            'offerId': '880771.46-00047152',
            'categoryId': '1693291525',
        },
        'outletsCount': 11800,
        'storesCount': 0,
        'pickupStoresCount': 11800,
        'depotStoresCount': 8604,
        'postomatStoresCount': 3196,
        'bookNowStoresCount': 0,
        'subsidies': true,
        'hasSafetyGuarantee': true,
        'domainUrl': 'pokupki.market.yandex.ru',
        'deliveryVat': 'NO_VAT',
        'createdAt': '2017-08-14T15:40:13',
        'mainCreatedAt': '2017-08-14T15:40:13',
        'returnDeliveryAddress': 'ООО «Яндекс.Маркет», а/я 245, Московский АСЦ, ОПС 140961',
        'homeRegion': {
            'entity': 'region',
            'id': 225,
            'name': 'Россия',
            'lingua': {
                'name': {},
            },
            'type': 0,
        },
    },
    'supplier': {
        'entity': 'shop',
        'id': 967382,
        'name': 'Миллена шарм',
        'business_id': 967383,
        'business_name': 'Миллена шарм',
        'gradesCount': 467,
        'overallGradesCount': 467,
        'qualityRating': 5,
        'isGlobal': false,
        'isCpaPrior': false,
        'type': '3',
        'taxSystem': 'USN_MINUS_COST',
        'isNewRating': true,
        'newGradesCount': 467,
        'newQualityRating': 4.942184154,
        'newQualityRating3M': 4.959349593,
        'ratingToShow': 4.959349593,
        'ratingType': 3,
        'newGradesCount3M': 246,
        'status': '',
        'cutoff': '',
        'warehouseId': 52524,
        'workSchedule': 'Понедельник - пятница 9.30 -17.00',
        'operationalRating': {
            'calcTime': 1648602099693,
            'lateShipRate': 0.568828,
            'cancellationRate': 0.232829,
            'returnRate': 0,
            'total': 98.79,
            'crossdockPlanFactRate': 0,
            'crossdockLateShipRate': 0,
            'crossdockReturnRate': 0,
            'ffPlanFactRate': 0,
            'ffReturnRate': 0,
            'ffLateShipRate': 0,
            'dsbsLateDeliveryRate': 0,
            'dsbsCancellationRate': 0,
            'dsbsReturnRate': 0,
        },
        'loyalty_program_status': 'DISABLED',
        'isEats': false,
    },
    'realShop': {
        'entity': 'shop',
        'id': 967382,
        'name': 'Миллена шарм',
        'business_id': 967383,
        'business_name': 'Миллена шарм',
        'gradesCount': 467,
        'overallGradesCount': 467,
        'qualityRating': 5,
        'isGlobal': false,
        'isCpaPrior': false,
        'type': '3',
        'taxSystem': 'USN_MINUS_COST',
        'isNewRating': true,
        'newGradesCount': 467,
        'newQualityRating': 4.942184154,
        'newQualityRating3M': 4.959349593,
        'ratingToShow': 4.959349593,
        'ratingType': 3,
        'newGradesCount3M': 246,
        'status': '',
        'cutoff': '',
        'warehouseId': 52524,
        'workSchedule': 'Понедельник - пятница 9.30 -17.00',
        'operationalRating': {
            'calcTime': 1648602099693,
            'lateShipRate': 0.568828,
            'cancellationRate': 0.232829,
            'returnRate': 0,
            'total': 98.79,
            'crossdockPlanFactRate': 0,
            'crossdockLateShipRate': 0,
            'crossdockReturnRate': 0,
            'ffPlanFactRate': 0,
            'ffReturnRate': 0,
            'ffLateShipRate': 0,
            'dsbsLateDeliveryRate': 0,
            'dsbsCancellationRate': 0,
            'dsbsReturnRate': 0,
        },
        'loyalty_program_status': 'DISABLED',
        'isEats': false,
    },
    'weight': '0.22',
    'dimensions': [
        '3',
        '20',
        '20',
    ],
    'returnPolicy': '7d',
    'marketSku': '101646425520',
    'sku': '101646425520',
    'ownMarketPlace': true,
    'offerColor': 'blue',
    'isFreeOffer': false,
    'isDefaultOffer': true,
    'supplierSku': '46-00047152',
    'shopSku': '46-00047152',
    'manufacturer': {
        'entity': 'manufacturer',
        'warranty': false,
        'country': 'Россия',
        'countries': [
            {
                'entity': 'region',
                'id': 225,
                'name': 'Россия',
                'lingua': {
                    'name': {
                        'genitive': 'России',
                        'preposition': 'в',
                        'prepositional': 'России',
                        'accusative': 'Россию',
                    },
                },
                'type': 3,
            },
        ],
    },
    'seller': {
        'price': '3285',
        'currency': 'RUR',
        'sellerToUserExchangeRate': 1,
    },
    'payments': {
        'deliveryCard': false,
        'deliveryCash': false,
        'prepaymentCard': false,
        'prepaymentOther': false,
    },
    'yandexBnplInfo': {
        'enabled': false,
    },
    'isRecommendedByVendor': false,
    'benefit': {
        'type': 'default',
        'nestedTypes': [
            'default',
        ],
        'description': 'Хорошая цена от надёжного магазина',
        'isPrimary': true,
    },
    'outlet': {
        'entity': 'outlet',
        'id': '10001755146',
        'name': 'Пункт выдачи заказов партнёра',
        'purpose': [
            'pickup',
        ],
        'daily': true,
        'around-the-clock': false,
        'gpsCoord': {
            'longitude': '38.52196',
            'latitude': '54.850614',
        },
        'postCode': 140563,
        'isMarketBranded': false,
        'isMarketPartner': true,
        'isMarketPostTerm': false,
        'isTryingAvailable': false,
        'type': 'pickup',
        'BooleanProperties': [
            {
                'name': 'isMarketPartner',
                'description': 'Партнерский ПВЗ Яндекс.Маркет',
            },
        ],
        'serviceId': 89395,
        'serviceName': 'Партнёрский ПВЗ ИП Гладышев Александр Николаевич',
        'isMegaPoint': true,
        'email': '',
        'shop': {
            'id': 431782,
        },
        'address': {
            'fullAddress': 'Озёры, улица Ленина, д. 102Б',
            'country': '',
            'region': '',
            'locality': 'Озёры',
            'street': 'улица Ленина',
            'km': '',
            'building': '102Б',
            'block': '',
            'wing': '',
            'estate': '',
            'entrance': '',
            'floor': '',
            'room': '',
            'office_number': '',
            'note': 'Остановка Микрорайон, Старый муниципальный рынок, рядом с Пятерочкой',
        },
        'selfDeliveryRule': {
            'workInHoliday': true,
            'currency': 'RUR',
            'cost': '799',
            'shipperHumanReadableId': 'Партнёрский ПВЗ ИП Гладышев Александр Николаевич',
            'partnerType': 'market_delivery',
        },
        'region': {
            'entity': 'region',
            'id': 10744,
            'name': 'Озёры',
            'lingua': {
                'name': {
                    'genitive': 'Озёр',
                    'preposition': 'в',
                    'prepositional': 'Озёрах',
                    'accusative': 'Озёры',
                },
            },
            'type': 6,
            'subtitle': 'Городской округ Озёры, Москва и Московская область, Россия',
        },
        'deliveryServiceOutletCode': '4287',
    },
    'prepayEnabled': false,
    'promoCodeEnabled': true,
    'vat': 'NO_VAT',
    'cargoType': 600,
    'cargoTypes': [
        600,
        621,
        950,
        970,
    ],
    'largeSize': false,
    'isFulfillment': false,
    'stockStoreCount': 2,
    'isAdult': false,
    'restrictedAge18': false,
    'isSMB': false,
    'atSupplierWarehouse': true,
    'fulfillmentWarehouse': 75735,
    'isGoldenMatrix': false,
    'shop_category_path': 'Платья',
    'shop_category_path_ids': '1693291525',
    'isFashion': true,
    'isFashionPremium': false,
    'isPartialCheckoutAvailable': false,
});

const createProductOptions = productId => ({
    'showUid': '16486267468471321155916000',
    'entity': 'product',
    'titles': {
        'raw': 'Платье женское "Незабываемый вечер',
        'highlighted': [
            {
                'value': 'Платье женское "Незабываемый вечер',
            },
        ],
    },
    'slug': 'plate-zhenskoe-nezabyvaemyi-vecher',
    'eligibleForBookingInUserRegion': false,
    'categories': [
        {
            'entity': 'category',
            'id': 7811901,
            'nid': 57297,
            'name': 'Платья',
            'slug': 'platia',
            'fullName': 'Женские платья',
            'type': 'guru',
            'cpaType': 'cpc_and_cpa',
            'isLeaf': true,
            'kinds': [],
        },
    ],
    'cpc': '-y0fuL1HYouJJ0yYKzZ5VXfqhLe0y42jB_JuuM9F9frb7-mcgVaJdMHVrzeWFd8_',
    'urls': {
        'direct': '//market.yandex.ru/product/1736272921?hid=7811901&nid=57297',
    },
    'type': 'model',
    'id': productId,
    'modelName': {
        'raw': 'Платье женское "Незабываемый вечер',
    },
    'skuOffersCount': 1,
    'skuPrices': {
        'min': '3285',
        'max': '3285',
        'currency': 'RUR',
    },
    'prices': {
        'min': '3285',
        'max': '3285',
        'currency': 'RUR',
        'avg': '3285',
    },
    'skuStats': {
        'totalCount': 2,
        'beforeFiltersCount': 2,
        'afterFiltersCount': 2,
    },
});

const createProductWithDefaultOffer = (productId, wareId) => {
    const productOptions = createProductOptions(productId);
    const offerOptions = createOfferOptions(wareId, productId);
    return mergeState([
        createProduct({
            ...productOptions,
            offers: {
                items: [wareId],
            },
        }, productOptions.id),
        {
            collections: {
                offer: {
                    [offerOptions.wareId]: offerOptions,
                },
            },
        },
    ]);
};


export const initialDataMock = mergeState([
    createProductWithDefaultOffer(1, '1'),
    createProductWithDefaultOffer(2, '2'),
    {
        data: {
            search: {
                view: 'grid',
                isVisualSearchEnabled: true,
            },
        },
    },
]);

export const visualSearchDataMock = mergeState([
    createProductWithDefaultOffer(3, '3'),
    createProductWithDefaultOffer(4, '4'),
    createProductWithDefaultOffer(5, '5'),
    createProductWithDefaultOffer(6, '6'),
    {
        data: {
            search: {
                view: 'grid',
                isVisualSearchEnabled: true,
            },
        },
    },
]);

export const emptyVisualSearchDataMock = {
    ...visualSearchDataMock,
    data: {
        search: {
            ...visualSearchDataMock.data.search,
            results: [],
        },
    },
};
