<Collection id="yandsearch" autostart="must" meta="yes">
    RequestQueueSize 1000
    RequestThreads 24
    LongReqsQueueSize 40
    LongReqsThreads 16
    ReAskOptions Timeout=200000000
    MergeOptions SkipSameDocids=0
    NGroupsForSourceMultiplier 1
    PureTrieFile /report-data/market.pure.trie
    ListingOptions OptimizeNewClientGroupCount=no
    SnippetCgiFilter fsgta;pron;qbundles;userhow;text;user_request;qtree
    MetaSearchOptions DontSearchOnMain DontCacheWithErrors AsyncSearch TwoStepQuery
    ConnectTimeout 1s
    SendingTimeout 1s
    <SearchSource>
        ServerDescr SHOP_FRESH
        CgiSearchPrefix http://fresh-0:17051/basesearch-fresh-0@100
        Options EnableIpV6=1,AllowDynamicWeights=1,MaxAttempts=4,RandomGroupSelection=1,RequestCompression=zstd1,ProtobufCompression=zstd1,ConnectTimeout=10ms,SendingTimeout=10ms,AllowBalancerDynamic=1,DynamicActiveDelay=1s,DynamicActiveRequest="GET /yandsearch?place=report_status&report-status-action=strict-check HTTP/1.1\r\n\r\n",DynamicActivePingAfterConnError=1,BalancerProxyConnectTimeout=10ms,BalancerProxyConnectRetryTimeout=50ms,BalancerProxyConnectRetryDelay=1ms,BalancerProxyBackendTimeout=10s,BalancerProxyBackendReadTimeout=10s,BalancerProxyBackendWriteTimeout=10s,BalancerProxyClientReadTimeout=10s,BalancerClientWriteTimeout=10s,DynamicHistoryInterval=10s,DynamicMaxPessimizedShare=0.8,DynamicFailRateCheckThreshold=0.1,DynamicFailRateCheckMinRequests=10,DynamicConsecutiveFailsCheckThreshold=50
    </SearchSource>
    <SearchSource>
        ServerDescr MODEL
        CgiSearchPrefix http://base-0:17051/basesearch-model-0@100
        CgiSnippetPrefix http://snippet-0:17051/basesearch-model-0
        Options EnableIpV6=1,AllowDynamicWeights=1,MaxAttempts=4,RandomGroupSelection=1,RequestCompression=zstd1,ProtobufCompression=zstd1
    </SearchSource>
    <SearchSource>
        ServerDescr SHOP
        CgiSearchPrefix http://base-0:17051/basesearch16-0@100
        CgiSnippetPrefix http://snippet-0:17051/basesearch16-0
        Options EnableIpV6=1,AllowDynamicWeights=1,MaxAttempts=4,RandomGroupSelection=1,RequestCompression=zstd1,ProtobufCompression=zstd1
    </SearchSource>
    <QueryLanguage>
        barcode: ATTR_LITERAL
        classifier_magic_id: ATTR_LITERAL
        contex: ATTR_LITERAL
        feed_category_ids: ATTR_LITERAL
        feed_offer_ids: ATTR_LITERAL
        hyper_categ_id: ATTR_LITERAL
        hyper_deep_categid: ATTR_LITERAL
        hyper_group_id: ATTR_LITERAL
        hyper_id: ATTR_LITERAL
        hyper_model_id: ATTR_LITERAL
        isbn: ATTR_LITERAL
        shop_offers_chunk: ATTR_LITERAL
        shop_feed_offers_chunk: ATTR_LITERAL
        urlhash: ATTR_LITERAL
        vendor_card: ATTR_LITERAL
        ware_md5: ATTR_LITERAL
        yx_deepest_hyperid: ATTR_LITERAL
        yx_ds_id: ATTR_LITERAL
        yx_group_descr: ATTR_LITERAL
        yx_hashtitle: ATTR_LITERAL
        yx_model_descr: ATTR_LITERAL
        yx_shop_region: ATTR_LITERAL
        visual: ATTR_LITERAL
        deal_of_the_day: ATTR_LITERAL
        vendor_id: ATTR_LITERAL
        sku: ATTR_LITERAL
        red_group_id_hash: ATTR_LITERAL
        model_color: ATTR_LITERAL
    </QueryLanguage>
</Collection>

<MarketReport>
    LogLevel Debug
    AccessLog /logs_dummy/report/access-tskv.log
    BaseAccessLog /logs_dummy/report/base-access-tskv.log
    SubPlaceAccessLog /logs_dummy/report/subplace-access-tskv.log
    PromoLog /logs_dummy/report/promo-tskv.log
    AmmoLog /dev/null
    CommonLog /logs_dummy/report/common.log
    DebugLog /logs_dummy/report/debug.log
    ShinyLog /logs_dummy/report/shiny.log
    ErrorLog /logs_dummy/report/error.log
    ExecStatsLog /logs_dummy/report/exec-stats.log
    FeatureLog /logs_dummy/report/feature.log
    FeatureLogProto /logs_dummy/report/feature-proto.log
    QueryLog /dev/null
    ShowTskvLog /logs_dummy/report/show-tskv.log
    TestDataLog /logs_dummy/report/test-data.log
    ExternalServicesTraceLog /logs_dummy/report/external-services-trace.log
    TsumDebugTraceLog /logs_dummy/report/tsum-debug-trace.log
    LogBrokerClientLog /logs_dummy/report/logbroker.log
    ExternalServicesLog /logs_dummy/report/external-services.log
    MetaPingerLog /logs_dummy/report/meta-pinger.log
    GlobalStatsFile /run/shm/report_global_stats
    Role meta
    Environment testing
    Location vla
    SubRole market
    ClusterIndex 0
    HostIndex 0
    DefaultSearchExperimentFlags new_model_aliases=1;formfilter=1;market_category_redirect_click_ratio=0.33;market_enable_mn_in_model_redirect=1;market_model_redirect_formula=fml_formula_238258;market_model_redirect_treshold=100;market_model_redirect_treshold_from_yandex=150;market_default_offer_mn_ranking_cpc_multiplier=0.01;market_default_offer_mn_ranking_cpa_multiplier=0.001;market_ha_cpc_ctr_mult_for_cpc=0.014;market_ha_cpc_ctr_mult_for_cpa=0.014;market_ha_cpa_ctr_mult=0.000053;market_ha_threshold_mult=0.014;rty_qpipe=1
    FormalizerHostAndPort cs-formalizer-rep.tst.vs.market.yandex.net:34512
    ParametrizatorHostAndPort market-parametrizator.tst.vs.market.yandex.net
    ParametrizatorTvmAlias parametrizator
    SaasHubHostAndPort http://quick-pipelines-proxy.tst.vs.market.yandex.net
    SaasHubTimeoutMs 600
    SaasHubRetry 1
    SaasHubDeliveryCart 0
    LoyaltyHostAndPort market-loyalty.tst.vs.market.yandex.net:35815
    LoyaltyExtReqTimeout 150
    LoyaltyExtReqRetryCount 3
    LoyaltyTvmAlias market-loyalty
    RequestCategoriesClassificatorHostAndPort cs-mxclassifier.tst.vs.market.yandex.net:34501
    SuggestHostAndPort yandex.ru
    TvmToolPort 17064
    TvmToolConfPath /tvmtool.conf
    TvmToolTokenPath /secrets/tvmtool_token
    TvmSelfAlias market-report
    DataSyncUrl http://dataapi.dst.yandex.net:21859
    DataSyncHostAndPort cloud-api.dst.yandex.net:8080
    DataSyncTimeoutMs 100
    DataSyncToken 3bddd1a316ea44d89a1e4db6b2843c3b
    DataSyncUID
    DataSyncTvmAlias datasync
    IchWillHostAndPort ichwill.vs.market.yandex.net:81
    RecommenderHostAndPort recommender.vs.market.yandex.net
    CryptaProfileHostAndPort bigb-fast.yandex.ru
    CryptaModelsHostAndPort classerv.rtcrypta.yandex.net:8080
    ClickHost market-click2.yandex.ru
    DeliveryCalcHostAndPort delicalc.report.mbi.tst.vs.market.yandex.net:30012
    DeliveryCalcRetryCount 2
    DeliveryCalcTimeoutMs 100
    BigBHostAndPort bigb-fast.yandex.ru
    BKHostAndPort yabs.yandex.ru:80
    OMMHostAndPort online-merch-machine.yandex.net
    AdvMachineHostAndPort web.apphost.yandex.ru
    BlueOMMHostAndPort online-beru-machine.yandex.net
    TolokaOMMHostAndPort omm.tst.vs.market.yandex.net
    BigBRequestsEnabled 1
    BigBTvmAlias bigb
    ClickNCollectTvmAlias clickncollect
    DjHostAndPort dj-recommender.tst.vs.market.yandex.net
    FastDjHostAndPort dj-recommender.tst.vs.market.yandex.net
    TurboHostAndPort turbopages.yandex.net
    TurboTimeout 1000
    SecretsDirPath /secrets
    CombinatorDefaultTimeoutMs 75
    CombinatorDefaultRetryCount 2
    CombinatorKeepAliveTimeMs 0
    CombinatorKeepAliveTimeoutMs 0
    CombinatorOffersDeliveryStatsTimeoutMs 75
    CombinatorOffersDeliveryStatsRetryCount 2
    CombinatorOffersDeliveryStatsPercentileTimeMs 50
    CombinatorCourierOptionsTimeoutMs 150
    CombinatorCourierOptionsRetryCount 2
    CombinatorCourierOptionsPercentileTimeMs 120
    CombinatorCourierDeliveryStatisticsTimeoutMs 125
    CombinatorCourierDeliveryStatisticsRetryCount 2
    CombinatorCourierDeliveryStatisticsPercentileTimeMs 100
    CombinatorPickupPointsGroupedTimeoutMs 125
    CombinatorPickupPointsGroupedRetryCount 2
    CombinatorPickupPointsGroupedPercentileTimeMs 100
    CombinatorPickupDeliveryStatisticsTimeoutMs 125
    CombinatorPickupDeliveryStatisticsRetryCount 2
    CombinatorPickupDeliveryStatisticsPercentileTimeMs 100
    CombinatorPickupPointsGeoTimeoutMs 600
    CombinatorPickupPointsGeoRetryCount 2
    CombinatorPickupPointsGeoPercentileTimeMs 500
    CombinatorDeliveryRouteTimeoutMs 200
    CombinatorDeliveryRouteRetryCount 2
    CombinatorDeliveryRoutePercentileTimeMs 150
    CombinatorSplitOrdersTimeoutMs 150
    CombinatorSplitOrdersRetryCount 2
    CombinatorSplitOrdersPercentileTimeMs 120
    CombinatorExpressGetEatsWarehousesTimeoutMs 1200
    CombinatorExpressGetEatsWarehousesRetryCount 1
    CombinatorExpressGetEatsWarehousesPercentileTimeMs 1000
    FastMappingsTimeOut 100
    FastMappingsRetryCount 3
    CarterTimeoutMs 230
    CarterTvmAlias market-carter
    NehHttpConnectTimeoutMs 1000
    SpellerHostAndPort erratum-test3.yandex.ru:19036
    SpellerRequestsEnabled 1
    ReqWizardHostAndPort reqwizard.yandex.net:8891
    HamzardHostAndPort hamzard.yandex.net:8891
    PersHostAndPort pers-static.tst.vs.market.yandex.net:34522
    TarantinoHostAndPort tarantino.tst.vs.market.yandex.net:29328
    TemplatorHostAndPort templator.tst.vs.market.yandex.net:29338
    BlackboxKind test
    BlackboxTimeoutMs 40
    TurboPagesHostAndPort hamster.yandex.ru
    MaxTurboUrlsCount 100
    UnifiedAgentPort 17075
    MemcachedEnabled 1
    MemcachedHostAndPort report-cache.tst.vs.market.yandex.net:11237
    RedirectCacherHostAndPort repredir-cache.tst.vs.market.yandex.net:11249
    MemcachedDjHostAndPort dj-feed-cache.tst.vs.market.yandex.net:11258
    GracefulDegradationMonitoringConf {"meta_queue":{"upper_threshold": 1.0,"lower_threshold": 0.5,"window_size":5000},"cpu_load":{"upper_threshold": 105,"lower_threshold": 90,"window_size": 5000},"max_level": 18, "change_speed": 5000, "mode": "linear_cpu"}
    ItsHostAndPort https://its.yandex-team.ru
    GenCfgHostAndPort api.gencfg.yandex-team.ru:80
    GenCfgTag stable-154-r283
    SnippetSaasNamespace 0
    SnippetSaasYpClusterNames sas,man,vla
    SnippetSaasYpClientName market-report
    SnippetSaasYpHost sd.yandex.net
    SnippetSaasYpPort 8080
    SnippetSaasYpUpdateInterval 60000000
    SnippetSaasYpConnectTimeout 1000000
    SnippetSaasYpRequestTimeout 3000000
    SnippetSaasYpDropClusterIfNotExists 1
    SnippetSaasHostAndPort saas-searchproxy-prestable.yandex.net:17000
    SnippetSaasServiceName market_snippet_tst
    SnippetSaasServiceNameLb market_snippet_tst
    SnippetSaasTvmAlias saas-snippet
    SnippetSaasYpEndpointSetIds saas-yp-searchproxy-prestable
    ClickNCollectHostAndPort click-n-collect.tst.vs.market.yandex.net
    CombinatorHostAndPort combinator.tst.vs.market.yandex.net:8080
    CombinatorExpressHostAndPort express.tst.vs.market.yandex.net:8080
    RouteStorageHostAndPort route-storage.tst.vs.market.yandex.net:8080
    CarterHostAndPort carter.tst.vs.market.yandex.net:35803
    FastMappingsHostAndPort fast-mappings-reader.tst.vs.market.yandex.net:8080
    MediaAdvIncutHostAndPort media-adv-incut-search.tst.vs.market.yandex.net:80
    ModelServiceYpEndpointSetId vla-market-runtime-models
    ModelServiceYpClusterNames vla
    ModelServiceYpClientName market-report
    ModelServiceYpHost sd.yandex.net
    ModelServiceYpPort 8080
    ModelServiceYpUpdateInterval 60000000
    ModelServiceYpConnectTimeout 1000000
    ModelServiceYpRequestTimeout 3000000
    BertServiceYpEndpointSetId vla-market-runtime-berts
    BertServiceYpClusterNames vla
    BertServiceYpClientName market-report
    BertServiceYpHost sd.yandex.net
    BertServiceYpPort 8080
    BertServiceYpUpdateInterval 60000000
    BertServiceYpConnectTimeout 1000000
    BertServiceYpRequestTimeout 3000000
    SaasUGCYpEndpointSetId saas-searchproxy-stable-vla
    SaasUGCYpClusterNames vla
    SaasUGCYpClientName market-report
    SaasUGCYpHost sd.yandex.net
    SaasUGCYpPort 8080
    SaasUGCYpUpdateInterval 60000000
    SaasUGCYpConnectTimeout 1000000
    SaasUGCYpRequestTimeout 3000000
    ChatsSaasHostAndPort
    ChatsSaasServiceName market_chats
    TextQueryDjHostAndPort dj-text-query-recommender.tst.vs.market.yandex.net
    SnippetSaasMode SNIPPET_OFF
    SnippetSaasTimeout 1000
    SnippetSaasBalancerTimeout 1000
    WizClient market-main-report
    QuoterHostAndPort localhost:17068
    QuoterServiceName testing_meta_market
    QuoterErrorIntervalMs 10000
    MetaPingerInstanceCachePath /pdata_dummy/meta_pinger_instance_cache
    MetaPingerCrossDcInstanceLookup 1
    ShardsConfigPath /shards.conf
    MetaPingerUseInternalBaseConsistencyChecker False
    DocIdCacheHostAndPort docid-cache.vs.market.yandex.net:11277
    DocIdCacheSize 10000
    DocIdCacheDocsLimit 10000
    DocIdCacheChunksCount 10
    ModelCardBidThresholds 225:100:2.0
    LocalSourceList
    IndexDir /index
    ReportDataDir /report-data
    MainSearchCtrDataDir /report-data
    DynamicDataDir /marketdynamic
    FulfillmentDynamicDataDir /fulfillment
    LMSDynamicDataDir /lms
    PromoSecondariesDir /promo_secondaries
    LoyaltyDynamicDataDir /loyalty
    FastDataOutletsDynamicDataDir /fast_data_outlets
    ModelBidsCutoffDataDir /vendor_model_bids_cutoff
    VendorOfferBidsCutoffDataDir /vendor_offer_bids_cutoff
    OrderServicesDynamicDataDir /order_services
    ModelOpinions /report-data/model-opinions.db
    DssmModelsPath /dynamic_models
    FormulasPath /formulas
    UrlEncKeysFile /clickdaemon_keys/clickdaemon.keys.json
    FeeShowEncKeysFile /checkouter_keys/key_main
    ReportLockdownFilePath /var/lock/market_report_lockdown
    QPromosDir /qpromos
    NordstreamDir /nordstream
    AccessAgentInstallDir /index_dummy/access-agent/install
    FeeShowEncKeyNumber 0
    UrlEncKeysFileJsonFormat 1
    UrlEncKeyNumber MARKET_TESTING_1
    OfferBasedCollectionDirs
    ModelBasedCollectionDirs
    AllReportSubRoles main
    ReportColor white
    LoyaltyEnabled 1
    EnableExecutionStatsForGlobalInit 1
    EmergencyFlagsGetterType ITS
    EmergencyFlagsGetterItsFlagsFilePath /controls/emergency_flags.json
    GenCfgBackupDir /pdata_dummy/gencfg_backup
    YpDiscoveryCacheDir /pdata_dummy/yp_discovery_cache
    PidDir /pid_dummy
    PidName report
    UseGlParamsForModels 1
    EnableParticularHttpErrors 400,423,429
    LoadNormQueryCtrData 1
    UseFactorann 1
    UseCpcFlag 1
    BuildMoiIndex 1
    ExperimentFlagsGetterType ITS
    ExperimentFlagsGetterService market_remote_flags
    ExperimentFlagsGetterItsFlagsFilePath /controls/experiment_flags.json
    ExperimentFlagsGetterHost saas-searchproxy-prestable.yandex.net
    ReqWizardTimeoutMs 1000
    ContextSearchTimeoutMs 30000
    OMMRequestsEnabledOnPrime 1
    DjOnPrimeRequestsEnabled True
    RelevanceThreadCountPercentage 43
    DelayedAttributeWriteThreadCountPercentage 25
    DefaultMaxTbsValue 9000000
    RelevancePerThreadDocumentCount 200
    BallocPreparedMemorySize 536870912
    TransparentHugePages 0
    BallocEnableReclaim 1
    ErrorBoosterProject market_report
    ErrorBoosterLogBrokerHostPortTopic logbroker.yandex.net:2135/market-search/market-report-errors
    DirectSendingFeatureLogToLogbroker 0
    FeatureLogLogBrokerHostPortTopic logbroker-pre.yandex.net:2135/market-search/market-feature-log
    FeatureLogLogBrokerFlushTimeoutMs 30000
    FeatureLogLogBrokerCodec zstd
    CombinatorDeliveryLogBrokerHostPortTopic logbroker.yandex.net:2135/market-search/test/market-combinator-delivery-log
    CombinatorCourierLogBrokerHostPortTopic logbroker.yandex.net:2135/market-search/test/market-combinator-courier-log
    CombinatorPickupLogBrokerHostPortTopic logbroker.yandex.net:2135/market-search/test/market-combinator-pickup-log
    MarketHealthLogBrokerHostPortTopic logbroker.yandex.net:2135/market-health-testing/other
    HyperThreadingMultiplier 0.23
    HidePartnerDocuments 0
    AccessPort 17070
    EnableLockedMemoryQuota 1
    IndexWarmupMode 1
    WarmupResidentPagesInfoFilePath /pdata_dummy/warmup_resident_pages_info.json
    SearchType META_ONLY
    RunningFlagFilePath /var/lock/report_running.lock
    AllowLoadingPrefsViaHttp 1
    EnableTestingFeatures 1
</MarketReport>

<Server>
    Port 17051
    Threads 12
    QueueSize 700
    AdminThreads 2
    ClientTimeout 30s
    ServerLog /logs_dummy/report/server.log
    LoadLog /dev/null
    Connections 30000
    ListenBacklog 1024
    AppHostOptions Port=17060, Threads=12
    <Authorization>
        UserName = backctld
        UserPassword = zooropa
    </Authorization>
</Server>

<DNSCache>
    DNSCache localhost=127.0.0.1 main-shards-host=127.0.0.1
</DNSCache>