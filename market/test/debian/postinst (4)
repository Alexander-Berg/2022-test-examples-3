#!/bin/bash

CONF_DIR="/etc/haproxy"
CONF_STATIC="${CONF_DIR}/conf-static"
CONF_VALUES="${CONF_DIR}/values-available"
CONF_VALUES_ENABLED="${CONF_DIR}/values-enabled"

fn_remove_static() {
  local _file="${1}"
  rm -f "${CONF_VALUES_ENABLED}/${_file}.yaml" 2>/dev/null
  rm -f "${CONF_STATIC}/${_file}.conf" 2>/dev/null
  rm -f "${CONF_VALUES}/${_file}.yaml" 2>/dev/null
}

case $1 in
configure)
  # Remove old configuration files
  set +e
  # Example: fn_remove_static "00008-parallel.report.kraken.market_slb"
  fn_remove_static "36700-common_notifier.market_slb_search-testing"
  fn_remove_static "34398-rs_indexing_service.market_slb_search-testing"
  fn_remove_static "39032-mbi_partner_status.market_slb_search-testing"
  fn_remove_static "39061-cache_balance.market_slb_search-testing"
  fn_remove_static "41802-fps_frontend.market_slb_search-testing"
  fn_remove_static "36001-mbo_stable_noxsl.market_slb-front-testing"
  fn_remove_static "42627-kotopes.market_slb_search-testing"
  fn_remove_static "41950-formalizer-mbo.market_slb_search-testing"
  fn_remove_static "43054-black.market_slb_search-testing"
  fn_remove_static "42472-ultra_controller_yp.market_slb_search-testing"
  fn_remove_static "427150-shipping.wms-load-tst.market_slb_search-testing"
  fn_remove_static "427151-picking.wms-load-tst.market_slb_search-testing"
  fn_remove_static "4271510-wms-load-tst.market_slb_search-testing"
  fn_remove_static "4271511-core.wms-load-tst.market_slb_search-testing"
  fn_remove_static "4271512-servicebus.wms-load-tst.market_slb_search-testing"
  fn_remove_static "4271513-autostart.wms-load-tst.market_slb_search-testing"
  fn_remove_static "4271514-transportation.wms-load-tst.market_slb_search-testing"
  fn_remove_static "4271515-shippingsorter.wms-load-tst.market_slb_search-testing"
  fn_remove_static "4271516-infor.wms-load-tst.market_slb_search-testing"
  fn_remove_static "4271517-reporter.wms-load-tst.market_slb_search-testing"
  fn_remove_static "4271518-consolidation.wms-load-tst.market_slb_search-testing"
  fn_remove_static "4271519-packing.wms-load-tst.market_slb_search-testing"
  fn_remove_static "427152-inventorization.wms-load-tst.market_slb_search-testing"
  fn_remove_static "4271520-auth.wms-load-tst.market_slb_search-testing"
  fn_remove_static "427153-ordermanagement.wms-load-tst.market_slb_search-testing"
  fn_remove_static "427154-replenishment.wms-load-tst.market_slb_search-testing"
  fn_remove_static "427155-api.wms-load-tst.market_slb_search-testing"
  fn_remove_static "427156-dropping.wms-load-tst.market_slb_search-testing"
  fn_remove_static "427157-taskrouter.wms-load-tst.market_slb_search-testing"
  fn_remove_static "427158-receiving.wms-load-tst.market_slb_search-testing"
  fn_remove_static "427159-placement.wms-load-tst.market_slb_search-testing"
  fn_remove_static "32290-statelog.market_slb_search-testing"
  fn_remove_static "35006-mbi_datacamp.market_slb_search-testing"
  fn_remove_static "27599-cashier.market_slb_search-testing"
  fn_remove_static "27647-mbo-flume-ng-solr.market_slb_search-testing"
  fn_remove_static "29827-market_metabase.market_slb_search-testing"
  fn_remove_static "35329-matcher_aggregator.market_slb_search-testing"
  fn_remove_static "30310-marketgroup.market_slb-front-testing"
  fn_remove_static "33115-market_icon_store.market_slb_search-testing"
  fn_remove_static "33163-iconstore.market_slb_search-testing"
  fn_remove_static "30470-model_search.market_slb_search-testing"
  fn_remove_static "29510-bre.market_slb_search-testing"
  fn_remove_static "44443-shop.market_slb_search-testing"
  fn_remove_static "44107-mbi_dwh_api.market_slb-front-testing"
  fn_remove_static "28511-dist-meta-store.market_slb_search-testing"
  fn_remove_static "27941-maxk-grpc-experiments.market_slb_search-testing"
  fn_remove_static "32123-scanner.market_slb_search-testing"
  fn_remove_static "29124-pricelabs.market_slb-front-testing"
  fn_remove_static "31886-click_n_collect.market_slb_search-testing"
  fn_remove_static "37441-dukalis.market_slb_search-testing"
  fn_remove_static "31614-market_content_mapping.market_slb_search-testing"
  fn_remove_static "30327-ipa-blue.market_slb-front-testing"
  fn_remove_static "29462-mbo_market_proxy.market_slb-front-testing"
  fn_remove_static "43675-dj_recommender_meta.market_slb_search-testing"
  fn_remove_static "35294-tablo.market_slb_search-testing"
  fn_remove_static "44704-b2boffice_tms.market_slb_search-testing"
;;

abort-upgrade|abort-remove|abort-deconfigure)
;;
*)
  echo "postinst called with unknown argument \`$1'" >&2
;;

esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0
