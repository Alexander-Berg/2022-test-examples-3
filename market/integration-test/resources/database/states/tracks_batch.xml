<?xml version="1.0" encoding="UTF-8"?>
<dataset>
    <source
            id="1"
            code="test_src"
            tracks_checked_at="2018-01-01"
    />

    <delivery_service
            id="101"
            source_code="test_src_code"
            code="test_ds"
            name="test_delivery_service_1"
            url="test_delivery_service_1_url"
            request_interval="15"
            is_active="true"
            source_id="1"
    />

    <consumer
            id="10"
            name="testConsumer"
    />

    <delivery_track
            id="1"
            track_code="TRACK_CODE_1"
            delivery_service_id="101"
            entity_id="ORDER_1"
            consumer_id="10"
            estimated_arrival_date_from="2017-01-01"
            estimated_arrival_date_to="2017-12-31"
            last_updated_ts="2018-01-01"
            delivery_type="2"
            last_checkpoint_acquired_ts="2018-01-02"
            back_url="url_shmurl"
            is_global_order="false"
            status="1"
            state="0"
            entity_type="0"
    />

    <delivery_track_consumer
            track_id="1"
            consumer_id="10"
            back_url="shmurl"
            last_notify_attempt_ts="2018-01-01 10:00:00"
            last_notify_success_ts="2018-01-01 10:00:00"
    />

    <delivery_track
            id="2"
            track_code="TRACK_CODE_2"
            delivery_service_id="101"
            entity_id="ORDER_2"
            consumer_id="10"
            estimated_arrival_date_from="2017-01-01"
            estimated_arrival_date_to="2017-12-31"
            last_updated_ts="2018-01-01"
            delivery_type="2"
            last_checkpoint_acquired_ts="2018-01-02"
            back_url="url_shmurl"
            is_global_order="false"
            status="1"
            state="0"
            entity_type="0"
    />

    <delivery_track_consumer
            track_id="2"
            consumer_id="10"
            back_url="shmurl"
            last_notify_attempt_ts="2018-01-01 10:00:00"
    />

    <delivery_track
            id="3"
            track_code="TRACK_CODE_3"
            delivery_service_id="101"
            entity_id="ORDER_3"
            consumer_id="10"
            estimated_arrival_date_from="2017-01-01"
            estimated_arrival_date_to="2017-12-31"
            last_updated_ts="2018-01-01"
            delivery_type="2"
            last_checkpoint_acquired_ts="2018-01-02"
            back_url="url_shmurl"
            is_global_order="false"
            status="1"
            state="0"
            entity_type="0"
    />

    <delivery_track_consumer
            track_id="3"
            consumer_id="10"
            back_url="shmurl"
            last_notify_attempt_ts="2018-01-01 10:00:00"
            last_notify_success_ts="2018-01-01 10:00:00"
    />

    <delivery_track
            id="4"
            track_code="TRACK_CODE_4"
            delivery_service_id="101"
            entity_id="ORDER_1"
            consumer_id="10"
            estimated_arrival_date_from="2017-01-01"
            estimated_arrival_date_to="2017-12-31"
            last_updated_ts="2018-01-01"
            delivery_type="2"
            last_checkpoint_acquired_ts="2018-01-02"
            back_url="url_shmurl"
            is_global_order="false"
            status="1"
            state="0"
            entity_type="0"
    />

    <delivery_track_consumer
            track_id="4"
            consumer_id="10"
            back_url="shmurl"
            last_notify_attempt_ts="2018-01-01 10:00:00"
    />

    <!-- invalid status -->
    <delivery_track
            id="5"
            track_code="TRACK_CODE_5"
            delivery_service_id="101"
            entity_id="ORDER_5"
            consumer_id="10"
            estimated_arrival_date_from="2017-01-01"
            estimated_arrival_date_to="2017-12-31"
            last_updated_ts="2018-01-01"
            delivery_type="2"
            last_checkpoint_acquired_ts="2018-01-02"
            back_url="url_shmurl"
            is_global_order="false"
            status="0"
            state="0"
            entity_type="0"
    />

    <delivery_track_consumer
            track_id="5"
            consumer_id="10"
            back_url="shmurl"
            last_notify_attempt_ts="2018-01-01 10:00:00"
            last_notify_success_ts="2018-01-01 10:00:00"
    />

    <!-- last_checkpoint_acquired_ts is null -->
    <delivery_track
            id="6"
            track_code="TRACK_CODE_6"
            delivery_service_id="101"
            entity_id="ORDER_6"
            consumer_id="10"
            estimated_arrival_date_from="2017-01-01"
            estimated_arrival_date_to="2017-12-31"
            last_updated_ts="2018-01-01"
            delivery_type="2"
            back_url="url_shmurl"
            is_global_order="false"
            status="1"
            state="0"
            entity_type="0"
    />

    <delivery_track_consumer
            track_id="6"
            consumer_id="10"
            back_url="shmurl"
            last_notify_attempt_ts="2018-01-01 10:00:00"
    />

    <!-- invalid checkpoint -->
    <delivery_track
            id="7"
            track_code="TRACK_CODE_7"
            delivery_service_id="101"
            entity_id="ORDER_7"
            consumer_id="10"
            estimated_arrival_date_from="2017-01-01"
            estimated_arrival_date_to="2017-12-31"
            last_updated_ts="2018-01-01"
            delivery_type="2"
            last_checkpoint_acquired_ts="2018-01-02"
            back_url="url_shmurl"
            is_global_order="false"
            status="2"
            state="0"
            entity_type="0"
    />

    <delivery_track_consumer
            track_id="7"
            consumer_id="10"
            back_url="shmurl"
            last_notify_attempt_ts="2018-01-01 10:00:00"
            last_notify_success_ts="2018-01-01 10:00:00"
    />

    <!-- has not any checkpoint -->
    <delivery_track
            id="8"
            track_code="TRACK_CODE_8"
            delivery_service_id="101"
            entity_id="ORDER_8"
            consumer_id="10"
            estimated_arrival_date_from="2017-01-01"
            estimated_arrival_date_to="2017-12-31"
            last_updated_ts="2018-01-01"
            delivery_type="2"
            last_checkpoint_acquired_ts="2018-01-02"
            back_url="url_shmurl"
            is_global_order="false"
            status="1"
            state="0"
            entity_type="0"
    />

    <!-- last_notify_success_ts > last_checkpoint_acquired_ts -->
    <delivery_track
            id="9"
            track_code="TRACK_CODE_9"
            delivery_service_id="101"
            entity_id="ORDER_9"
            consumer_id="10"
            estimated_arrival_date_from="2017-01-01"
            estimated_arrival_date_to="2017-12-31"
            last_updated_ts="2018-01-01"
            delivery_type="2"
            last_checkpoint_acquired_ts="2018-01-02"
            back_url="url_shmurl"
            is_global_order="false"
            status="1"
            state="0"
            entity_type="0"
    />

    <delivery_track_consumer
            track_id="9"
            consumer_id="10"
            back_url="shmurl"
            last_notify_attempt_ts="2018-01-03 10:00:00"
            last_notify_success_ts="2018-01-03 10:00:00"
    />

    <!-- invalid status of single checkpoint -->
    <delivery_track
            id="10"
            track_code="TRACK_CODE_10"
            delivery_service_id="101"
            entity_id="ORDER_10"
            consumer_id="10"
            estimated_arrival_date_from="2017-01-01"
            estimated_arrival_date_to="2017-12-31"
            last_updated_ts="2018-01-01"
            delivery_type="2"
            last_checkpoint_acquired_ts="2018-01-02"
            back_url="url_shmurl"
            is_global_order="false"
            status="1"
            state="0"
            entity_type="0"
    />

    <delivery_track_consumer
            track_id="10"
            consumer_id="10"
            back_url="shmurl"
            last_notify_attempt_ts="2018-01-01 10:00:00"
            last_notify_success_ts="2018-01-01 10:00:00"
    />



    <checkpoint
            id="1"
            track_id="1"
            country="country"
            city="city"
            location="location"
            message="message"
            status="30"
            raw_status="30"
            zip_code="zip code"
            checkpoint_ts="2018-01-01"
            acquired_by_tracker_ts="2018-01-02"
            survey_type="0"
    />
    <checkpoint
            id="2"
            track_id="2"
            country="country"
            city="city"
            location="location"
            message="message"
            status="30"
            raw_status="30"
            zip_code="zip code"
            checkpoint_ts="2018-01-01"
            acquired_by_tracker_ts="2018-01-02"
            survey_type="1"
    />
    <checkpoint
            id="3"
            track_id="3"
            country="country"
            city="city"
            location="location"
            message="message"
            status="30"
            raw_status="30"
            zip_code="zip code"
            checkpoint_ts="2018-01-01"
            acquired_by_tracker_ts="2018-01-02"
            survey_type="0"
    />
    <checkpoint
            id="4"
            track_id="4"
            country="country"
            city="city"
            location="location"
            message="message"
            status="30"
            raw_status="30"
            zip_code="zip code"
            checkpoint_ts="2018-01-01"
            acquired_by_tracker_ts="2018-01-02"
            survey_type="1"
    />
    <checkpoint
            id="5"
            track_id="5"
            country="country"
            city="city"
            location="location"
            message="message"
            status="30"
            raw_status="30"
            zip_code="zip code"
            checkpoint_ts="2018-01-01"
            acquired_by_tracker_ts="2018-01-02"
            survey_type="0"
    />
    <checkpoint
            id="6"
            track_id="6"
            country="country"
            city="city"
            location="location"
            message="message"
            status="30"
            raw_status="30"
            zip_code="zip code"
            checkpoint_ts="2018-01-01"
            acquired_by_tracker_ts="2018-01-02"
            survey_type="1"
    />
    <checkpoint
            id="7"
            track_id="7"
            country="country"
            city="city"
            location="location"
            message="message"
            status="30"
            raw_status="30"
            zip_code="zip code"
            checkpoint_ts="2018-01-01"
            acquired_by_tracker_ts="2018-01-02"
            survey_type="0"
    />
    <checkpoint
            id="9"
            track_id="9"
            country="country"
            city="city"
            location="location"
            message="message"
            status="30"
            raw_status="30"
            zip_code="zip code"
            checkpoint_ts="2018-01-01"
            acquired_by_tracker_ts="2018-01-02"
            survey_type="1"
    />

    <!-- invalid status -->
    <checkpoint
            id="10"
            track_id="10"
            country="country"
            city="city"
            location="location"
            message="message"
            status="0"
            raw_status="0"
            zip_code="zip code"
            checkpoint_ts="2018-01-01"
            acquired_by_tracker_ts="2018-01-02"
            survey_type="0"
    />
    <checkpoint
            id="11"
            track_id="2"
            country="country"
            city="city"
            location="location"
            message="message"
            status="30"
            raw_status="30"
            zip_code="zip code"
            checkpoint_ts="2018-01-01"
            acquired_by_tracker_ts="2018-01-02"
            survey_type="1"
    />
    <checkpoint
            id="12"
            track_id="2"
            country="country"
            city="city"
            location="location"
            message="message"
            status="30"
            raw_status="30"
            zip_code="zip code"
            checkpoint_ts="2018-01-01"
            acquired_by_tracker_ts="2018-01-02"
            survey_type="0"
    />
    <checkpoint
            id="13"
            track_id="2"
            country="country"
            city="city"
            location="location"
            message="message"
            status="0"
            raw_status="0"
            zip_code="zip code"
            checkpoint_ts="2018-01-01"
            acquired_by_tracker_ts="2018-01-02"
            survey_type="1"
    />

</dataset>
