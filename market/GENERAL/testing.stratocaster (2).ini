[general]
envtype = testing
mitype = stratocaster
target = production
min_models_in_index = 2000000
mbi_api_base_url = http://mbi-back.tst.vs.market.yandex.net:34820/elliptics/file?token=Nu00fDiseENKWojVx4MIeys1MKQdCREt
mbi_api_base_url_mds = http://mbi-back.tst.vs.market.yandex.net:34820
diff_minimal_indexer_time = 900
diff_minimal_indexer_time_fail = 120
diff_oi_worker_max_offers_count = 1875000
save_meta_dists_to_sandbox = true
save_dists_to_sandbox = false
model_docid_map = false
docid_map = false
replicate_docid_map = false
mitype_reserve = gibson
per_step_logs = true
enable_in_out_checks = true
max_num_offers = 240000000
dists_for_skynet = *
dists_for_skynet_blacklist = [
    "^search-model-report-data$",
    "^search-model-stats$",
    "^search-part-\\d+$",
    "^search-snippet-blue-\\d+$",
    "^book-snippet-\\d+$",
    "^model-snippet-\\d+$",
    "^search-snippet-\\d+$"
    ]
collect_rbtorrents_from_offers = true
collect_rbtorrents_from_master = true
sandbox_dists_ttl = 7
max_time_to_wait_async_copybases = 10
disable_sbid = true
info_center_kind = SQL
use_skynet_in_reductor = true
save_dists_to_sandbox_async = false
check_generation_unit_sizes_enabled = true
check_generation_unit_sizes_for_blue_shard_enabled = false
check_genlog_integrity_enabled = true
check_genlog_integrity_for_blue_shard_enabled = false
number_workdir_as_index_part = true
main_idx_max_offers_count = 120000000
separate_meta_index = true
make_total_dists = false
all_dists_in_pipeline = true
genlog_integrity_in_pipeline = true
meta_stats_dists_in_pipeline = true
generation_unit_sizes_in_pipeline = true
common_max_speculative_job_count=3
pre_checks_enabled = true
separate_cpc = true
first_cpc = 100000
fix_inprogress_prev_generation_sql_state_enabled = true
allow_offers_from_or3 = false
main_idx_max_offers_per_sku_count = 25000
glue_config_path = /etc/yandex/marketindexer/glue/testing.stratocaster.json
idxapi_url = http://idxapi.tst.vs.market.yandex.net:29334
bin_health_log_enable = true
genlog_integrity_detect_empty_strings = true
errors_health_log_enable = true

[deliverycalc]
check_delivery_v2 = true
host = delicalc.search.mbi.tst.vs.market.yandex.net
port = 30012
add_buckets_and_modifiers_to_dist = true
add_daas_courier_delivery_to_mmap = true
add_daas_pickup_delivery_to_mmap = true
second_version = true
run_make_idx_without_params = true

[main_idx]
generate_streams_tables = true

[datacamp]
indexation_enabled = true
united_offers_tablepath = //home/market/testing/indexer/datacamp/united/white_out/recent
partners_path = //home/market/testing/indexer/datacamp/united/partners
categories_tablepathpath = //home/market/testing/indexer/datacamp/united/categories
refresh_dump_url = https://datacamp-admin.white.tst.vs.market.yandex.net/dump?cluster=arnold&color=blue&color=white&color=direct&color=lavka&color=eda&out_home=//home/market/testing/indexer/stratocaster/in&calc_stats=true
united_indexation_mode = Entire
use_temporary_promo_table_white = true
rotated_dumps_table_dirs = //home/market/testing/indexer/stratocaster/in/datacamp/united/white_out,//home/market/testing/indexer/stratocaster/in/datacamp/united/blue_out,//home/market/testing/indexer/stratocaster/in/datacamp/united/lavka_out,//home/market/testing/indexer/stratocaster/in/datacamp/united/direct_out,//home/market/testing/indexer/stratocaster/in/datacamp/united/eda_out
rotated_dumps_keep_count = 2

[blue_datacamp]
indexation_enabled = true
united_offers_tablepath = //home/market/testing/indexer/datacamp/united/blue_out/recent
partners_path = //home/market/testing/indexer/datacamp/united/partners
delivery_table_for_push_partners = //home/market/testing/indexer/stratocaster/delivery/blue_generations/recent/buckets
united_indexation_mode = Entire
use_async_delivery_buckets = true

[direct_datacamp]
max_direct_offers = 1000000
indexation_enabled = false
partners_path = //home/market/testing/indexer/datacamp/united/partners
united_offers_tablepath = //home/market/testing/indexer/datacamp/united/direct_out/recent
direct_tgo_tablepath = //home/direct/export/market/filtered_feeds
add_direct_filters = true

[fullmaker]
allow_white_shops = true
allow_blue_shops = true
allow_turbo_shops = false
allow_turbo_experimental_shops = false
allow_direct_shops = true
allow_vertical_shops = false
fill_genlog_in_fullmaker = true

[clean]
clean_generations_on_workers = true
enable_clean_dists = true
keep_generations_complete_dists = 5
keep_generations_complete = 1
keep_generations_complete_daily = 0
keep_generations_complete_weekly = 0

[misc]
should_calc_shop_vendor_promo_offer_clicks = false
filetered_build_mass_index_tasks: build_blue_shard_panther_for_offers_from_yt_counts, build_blue_shard_panther_exp_for_offers_from_yt_counts, build_blue_shard_panther_exp2_for_offers_from_yt_counts, build_blue_shard_panther_for_offers, build_blue_shard_panther_exp_for_offers, copy_blue_shard_panther_exp_for_offers_from_yt_counts, copy_blue_shard_panther_exp_for_offers, copy_blue_shard_panther_exp2_for_offers_from_yt_counts
filtered_build_mass_index_failed_tasks = end_offer_pipeline,end_book_pipeline,end_model_pipeline
booknow_enabled = true
apply_model_bids = true
or3_enabled = false
use_yt = true
promo_active = true
yt_promo_active = true
promo_use_yt = true
yt_sessions = true
promo_cleaner_thinning = 10
promo_cleaner_thinning_period = 5
promo_cleaner_limit = 30
blue_promo_cleaner_thinning = 10
blue_promo_cleaner_thinning_period = 5
blue_promo_cleaner_limit = 30
click_n_collect_indexer_active = false
clicks_indexer_active = true
glfilters_popularity_indexer_active = true
white_marketplace_indexer_active = true
msku_upload_enabled = true
enable_yt_logging = true
api_prices_enabled = true
process_log_dyn_path = //home/market/testing/indexer/stratocaster/out/logs/process_log.v2
process_log_ttl_days = 2
gifts_active = true
blue_price_validation_enabled = true
need_calc_dist_statistic = true
preorder_dates_filename = preorder_dates.testing.json
credit_plans_filename = credit_plans.testing.json
warehouse_priorities_filename = warehouse_priorities.testing.pbuf.sn
msku_jump_table_enabled = true
jump_table_dump_enabled = true
jump_table_dumper_dir = /var/lib/yandex/jump_table
thirdparty_dco_enabled = true
is_qbids_active = false
use_top_queries = true
use_buckets_info_in_region_cache = true
collect_old_delivery_buckets_in_region_cache = true
calc_generation_freshness = true
save_indexer_report_state_enable = true
promo_secondary_offers_converter_enabled = true
promo_secondary_offers_converter_report_proxy = report.tst.vs.market.yandex.net:17051
gl_sc_mmap_version = 3
sharding_by_msku_categories_white = 1031249
sharding_by_msku_categories_white_dindex = 1031249,90590
sharding_by_msku_fully_enabled_white = true
take_only_one_active_promo = false
disable_by_default_based_on_promo_status = true
ware_md5_deduplicator_enabled = true
use_promo_table = true
drop_offers_with_no_sizes = true
skip_offers_indexer = true
enable_recipes_converter = true
yt_promo_split_generic_bundles = true
generate_offers_color_table = true
generate_blue_urls_table = true
use_mbo_export_from_getter = true
create_missed_clusters_table = true
filter_shopsdat_in_fullmaker = true
write_bucket_info_vectors = true
join_white_to_blue_offers = true
enable_build_shop_delivery = true
shop_delivery_enable = false
enable_build_shop_calendar = true
use_regional_delivery_info_in_shop_delivery_options_builder = true
blue_promo_reduce_enabled = false
disable_promo_matching_in_final_reduce = true
blue_promo_reduce_memory_limit = 1610612736
save_fee_as_bid = false
clear_old_bucket_ids_for_white_offers = true
clear_buckets_for_wcpa = false
add_white_cpa_to_blue_shard = true
use_category_restrictions_in_offers_processor = true
match_by_express_flag = true
match_by_warehouse = true
apply_promos_for_dsbs_offers = true
apply_promos_for_dsbs_offers_with_msku = true
apply_cashback_for_dsbs_offers = true
exclude_white_cpa_from_white_shards = false
generate_offers_search_texts_table = true
msku_hiding_rules_report_enabled = true
use_geo_regions_from_delivery = true
use_lms_for_bucket_filtering = true
convert_indexarc_thread_count = 4
convert_indexarc_batch_size = 100000
use_contex_relations = true
dump_contex_msku_enabled = true
filter_ctr = true
send_offer_type_stats = true
enrich_blue_offers_from_fast_sku = true
enrich_blue_offers_from_resale = true
patch_uc_part_for_fast_sku_offer = true
deleted_msku_limit=3000
filter_out_unpublished_msku=true
use_original_by_link = true
check_offers_at_the_end_offers_pipline = true

allow_scaling = true
scale_delivery = true
publish_scale_generation = true
allow_scaling_multiplier_white = 2
allow_scaling_multiplier_blue = 2
ctr_to_mms_converter_parse_error_limit = 100000

reduce_regions_instead_set_earth = true
process_picture_crc = true

filter_regions_by_pickup_outlet_type = true
report_shops_dat_upload_enable = true
lazy_yt_data_upload = true

enable_blue_flash_promos = true
promo_collector_json_stats_file = promo_collector.log
enable_promo_collector_tskv_log = true
propagate_msku_gl_filters_to_offers = true
dump_jump_table_to_fb32 = false

enable_using_mbo_stuff_from_last_complete = true
use_yt_mbo_stuff = true
prefer_scaled_pic = true

use_input_genlog_for_offer_processor = true
use_original_title_for_blue_offers = true

enable_check_last_generations_for_not_publishing = false
set_has_adv_bid_literal = true

[saas_hub]
saas_hub_addresses = sas1-1102.search.yandex.net:20133,sas1-8143.search.yandex.net:20133,sas2-0121.search.yandex.net:20133,sas3-2066.search.yandex.net:20133,sas3-2069.search.yandex.net:20133
yasm_tags = ctype=testing;geo=sas
pq_source_id = testing_stratocaster_saas_sender
pq_tvm_id = 2016527

[feeds]
status_set = 'system', 'mock', 'publish', 'duplex'
threshold = 0.85
dump_checkpoints = false

[monitoring]
gen_stats_threshold = 50
rootcateg_offers_threshold = 50
gen_offers_with_pictures_threshold = 0
gen_blue_offers_threshold = 10000
gen_blue_offers_threshold_in_213 = 2000
gen_fake_msku_offers_threshold = 500000
gen_blue_buybox_threshold = 2500
quota_limits = true
fresh_sla_threshold_minutes = 1080
gen_blue_offers_with_delivery = 95
gen_blue_1p_offers_with_delivery = 95
fresh_publication_sla_threshold_minutes = 50
fresh_indexation_sla_threshold_minutes = 1030
enable_white_razladka_generation_unit_sizes = true
enable_white_razladka_genlog_integrity = true
enable_blue_shard_razladka_generation_unit_sizes = false
enable_blue_shard_razladka_genlog_integrity = false
min_num_direct_offers = 0
min_num_dsbs_offers = 5000
min_num_medicine_offers = 0
min_num_alcohol_offers = 0
gen_blue_1p_offers_threshold = 100
chunks_warn_threshold = 300000
chunks_error_threshold = 600000
compression_queue_warn_threshold = 500
compression_queue_error_threshold = 1000
offers_with_discount_ratio_limit = 0.00025
min_num_offers_with_promokey = 100000
max_offers_for_promokey = 15000000
enable_offers_in_promotype_check = false
promo_collector_check_before_recent_update = true
enable_check_feedlog_stats = true

[solomon_sender]
enabled = true
token_uuid = sec-01g8x8emcsyhdef3ytd69b7fr1

[bid]
auction_result_upload_mode = on
exchange_service_url = https://mbidding.tst.vs.market.yandex.net:38700/market/exchange
exchange_service_url_modelbid = https://mbi-mbidding-vendor.tst.vs.market.yandex.net:38704/market/exchange
yt_table_dir = //home/market/testing/indexer/common/auction_result
queue_enabled = true
mds_upload_enable = true
mds_publish_enabled = true
mds_publish_download_only = false
mbi_stalled_interval_main = 5
mbi_stalled_interval_qbids = 1
actuality_check_enable_generic = true
actuality_check_enable_rty = true

[qindex]
enable_yt = true
torrent_publish_enabled = false
mds_upload_enable = true
mds_publish_enabled = true
mds_publish_download_only = false

[session]
life_limit_interval = 72

[stats-calc]
generations_to_keep = 2
generations_to_keep_daily = 3
generations_to_keep_weekly = 4

[awaps]
nthreads = 8
generations_to_keep = 3
upload_to_s3 = true
export_offers_to_yt = true
upload_models = true

[yt_genlog]
yt_user = robot-mrkt-idx-tst
yt_proxy = arnold.yt.yandex.net
yt_pool = market-testing-indexer
all_generations_keep_days = 1
daily_generations_keep_days = 7
weekly_generations_keep_days = 21
monthly_generations_keep_days = 90
publish_event = true
operation_weight = 100
upload_half_genlog = false
chunk_size = 268435456
only_for_publish = false

[yt]
yt_proxy = arnold.yt.yandex.net
yt_pool = market-testing-indexer
yt_priority_pool = market-testing-indexer
yt_proxy_primary = arnold.yt.yandex.net
yt_proxy_reserve = hahn.yt.yandex.net
yt_picrobot_meta =
yt_new_picrobot_state = //home/market/testing/indexer/picrobot/state/state
yt_picrobot_backup_meta_keep_count = 1
yt_picrobot_dups_table = //home/market/testing/indexer/picrobot/stats/recent/dups2
yt_blue_3p_promo_table_name = //home/market/testing/market-promo/promo3p/current/promo
yt_msku_table_name = //home/market/testing/market-promo/promo3p/current/msku
yt_discount_category_restrictions = //home/market/testing/indexer/common/discounts/category_restrictions/recent
yt_discount_msku_restrictions = //home/market/testing/indexer/common/discounts/msku_restrictions/recent
yt_discount_price_history_limit = //home/market/testing/indexer/common/discounts/price_history_limit/recent
yt_price_history_dir = //home/market/testing/indexer/stratocaster/history/prices
yt_price_validation_table = //home/market/testing/indexer/stratocaster/history/prices/hprices_pricedrops/last_complete
yt_blue_price_history_dir = //home/market/testing/indexer/stratocaster/history/blue/prices
yt_blue_price_validation_table = //home/market/testing/indexer/stratocaster/history/blue/prices/hprices/last_complete
yt_bundle_promo_table =
yt_mdm_info_table = //home/market/testing/indexer/common/lbdumper/mdm
yt_mstat_stock_table_for_cron = //home/market/production/mstat/dictionaries/stock_sku/1h/latest
yt_mstat_msku_transitions_table = //home/market/prestable/mstat/dictionaries/mbo/sku_transitions/latest
yt_offer_conversions = //home/market/production/amore/conversion_prediction/predictions/recent
yt_reviews_table = //home/market/testing/pers-grade/tables/pub_model_grades/current
yt_reviews_source_table = //home/market/testing/pers-grade/tables/grade/current
home_dir = //home/market/testing/indexer/stratocaster
yt_blue_dco_upload_table = //home/market/production/mstat/analyst/regular/mbi/blue_prices/latest_dco_upload_table
yt_blue_golden_matrix_table = //home/market/production/mstat/analyst/regular/cubes_analyst/golden_matrix/1d/latest
yt_honest_discount_table = //home/market/testing/monetize/dynamic_pricing/honest_discount/max_prices/latest
yt_user = market-indexer-testing
yt_primary_medium = ssd_blobs
yt_finished_mi3_to_default_medium = true
idr_factor = 3
oi_socket_timeout = 10
yt_salesinfo_dir = //home/market/testing/indexer/stratocaster/history/salesinfo
yt_salesinfo_days_total = 30
yt_clicks_aggregator_dir = //home/market/testing/indexer/stratocaster/clicks
yt_glfilters_popularity_aggregator_dir = //home/market/testing/indexer/stratocaster/history/filters
yt_blue_datacamp_dco_prices = //home/market/testing/indexer/datacamp/united/dco
white_marketplace_banned_table = //home/market/testing/abo/hiding_rule/white
white_marketplace_jur_table = //home/market/testing/abo/white/supplier/jur_info
yt_blue_price_limit_external = //home/market/production/mstat/analyst/regular/mbi/blue_prices/max_blue_prices/latest
yt_amore = //home/market/testing/amore/dynamic/output_lbdumper
yt_blue_amore = //home/market/testing/amore/dynamic/output_lbdumper_blue
separated_stats_calc_dir_for_half = true
session_table_max_rows_scan = 20000
yt_blue_promo_gwp_table = //home/market/testing/indexer/stratocaster/promos/blue/in/recent
yt_scalability_promo_table = //home/market/testing/load-admin/promos
yt_promo_mapreduce_table = //home/market/testing/indexer/stratocaster/promos/blue_on_white/mbi_datacamp_mr_in/recent
yt_blue_promo_datacamp_table = //home/market/testing/indexer/stratocaster/promos/blue_on_white/mbi_datacamp_in/recent
yt_blue_cashback_table = //home/market/testing/market-promo/market-promo/cashback/recent
yt_blue_promocode_table = //home/market/testing/market-promo/market-promo/promocode_coin/recent
yt_blue_promo_details_table_datacamp = //home/market/testing/indexer/stratocaster/promos/blue_on_white/mbi_datacamp_in/recent
yt_merged_promo_details_table = //home/market/testing/indexer/stratocaster/promos/merged_promo_details
yt_datacamp_promo_table_path = //home/market/testing/indexer/datacamp/promo/backups/recent
fill_partner_cashback = true
yt_promo_matching_restrictions_table_name = //home/market/testing/market-promo/partner_cashback/standard_promo_hids/current
yt_promo_priorities_table_name = //home/market/testing/market-promo/partner_cashback/standard_promo_properties/current
yt_promo_bucket_names_table_name = //home/market/testing/market-promo/partner_cashback/properties/current
yt_clean_merged_promo_details_dir = true
yt_monetize_promo_table = //home/market/testing/monetize/dynamic_pricing/promo_subsidies_3p/promo_for_index/latest
yt_personal_promo_table = //home/market/testing/monetize/dynamic_pricing/personal_promo/promo_for_index/latest
yt_promo_collector_table = //home/market/testing/indexer/promos/offers_matched/promos/recent
offers_version_table_enabled = true
yt_collect_promo_details = true
yt_collected_promo_details_output_dir = //home/market/testing/indexer/stratocaster/promos/collected_promo_details
yt_collected_promo_details_export_dir = //home/market/testing/indexer/stratocaster/out/promos/collected_promo_details
yt_clean_collected_promo_details_dir = true
use_collected_promo_details_table = true
yt_collected_promo_details_fast_promos_output_dir = //home/market/testing/indexer/stratocaster/promos/fast_promos
use_fast_promos_mode_in_qpromos = true
split_large_promos = true
split_large_promos_part_size = 50
filtered_promos_output_dir = //home/market/testing/indexer/stratocaster/promos/collected_promo_details/filtered
filtered_promos_fast_promos_output_dir = //home/market/testing/indexer/stratocaster/promos/fast_promos/filtered
yt_express_table = //home/market/testing/combinator/graph/yt_express_warehouse
yt_use_new_honest_discount_algo = true
yt_ir_by_msku_table = //home/market/testing/ir/smartmatcher/assortment_clustering/tsar_index/recent/msku_index
yt_ir_by_offer_table = //home/market/testing/ir/smartmatcher/assortment_clustering/tsar_index/recent/offer_index
yt_vendor_by_region_restrictions_table_path = //home/market/users/aboltunov/vendor-region-restrictions
yt_shop_by_region_restrictions_table_path = //home/market/testing/mbi/delivery/region_blacklist/latest
dump_shop_by_region_restrictions_enabled = true
dump_vendor_by_region_restrictions_enabled = false
filtered_offers_table_enabled = true
models_export_dir = //home/market/testing/indexer/stratocaster/in/models_data
models_export_lockpath = //home/market/testing/indexer/stratocaster/in/models_data/lockpath
models_export_for_model_miner_dir = //home/market/testing/indexer/datacamp/embedding_miner/in/models
models_export_keep_count = 8
build_models_export_enabled = true
mbo_export_dir = //home/market/testing/mbo/export
mbo_export_path = //home/market/testing/mbo/export/recent
mbo_export_models_path = //home/market/testing/mbo/export/recent/models/models
mbo_export_sku_path = //home/market/testing/mbo/export/recent/models/sku
mbo_export_categories_path = //home/market/testing/mbo/export/recent/categories
clean_mi3_on_fail = true

[or3_offers_export]
enabled = true
enable_datacamp = true
yt_proxy = arnold.yt.yandex.net
yt_tokenpath = /etc/datasources/yt-market-indexer
yt_home_dir = //home/market/testing/indexer/stratocaster
yt_pool = market-testing-indexer
enable_united_datacamp = true

[shop_categories_export]
async_enabled = false
sync_enabled = true
yt_proxy = arnold.yt.yandex.net
yt_tokenpath = /etc/datasources/yt-market-indexer
yt_home_dir = //home/market/testing/indexer/stratocaster
yt_pool = market-testing-indexer
enable_datacamp = true

[mds.market-export-public]
host = storage-int.mdst.yandex.net
port = 1111
host_read = storage.mdst.yandex.net
port_read = 443
namespace = market-export-public
token = bWFya2V0LWV4cG9ydC1wdWJsaWM6ODMxOGVmYTNkYzRjN2NkZDNlNzgxZGY2YTE3MDJjYTk=

[offers_robot]
new_conductor_groups = mi_orn-testing

[mapper_memory]
default = 1024
CategoryRegionalStats2 = 8192
VisualClusterWizardStats = 3072

[reducer_memory]
OfferFiltersForModelsStats = 8196

[reducer_count]
VisualClusterWizardStats = 64

[blue]
indexation = off
publish = off

[banner]
upload = true
marketdynamic_download = false
banner_parts_stats_dir = /var/lib/yandex/indexer/market/tmp
logs_generations_count = 3
feed_generations_count = 1
remove_feed_files = true
enable_parallel_yql = true
parallel_yql_queries_number = 1
comarketing_tag_yt_table = //home/market/users/ievsiukova/for_criteo
google_low_ue_msku_table = //home/market/development/yamarec/performance/hidden_msku/google/latest
yandex_low_ue_msku_table = //home/market/development/yamarec/performance/hidden_msku/yandex/latest
genlog_table_path = //home/market/testing/indexer/stratocaster/mi3/main/last_complete/genlog
check_banner_feeds_row_count = false
banner_feeds_row_count_ratio_threshold_cluster = 0.1
check_feed_row_count_skip_feeds = beru_offers_liqui_moli;cpa_sku_for_businesses;blue_offers_k50_topprice
good_crossdock_shopid = 1166158,1220762,2534136,541159,1215887
enable_nordstream = true
exclude_feeds=beru-missing-brands;beru_for_regional_prices;beru_regional_prices;google_for_regional_prices;google_regional_prices;beru_reviews;google_dsa;beru_category_google_dsa;beru_vendor_category_google_dsa;beru;market_facebook_1p_msku;beru-facebook-geo;beru_facebook_tiktok;blue_facebook_beauty;blue_facebook_sportfood;beru-facebook-variation;blue_offers_k50_separate;blue_offers_split_by_supplier_k50;cpa_models_for_huawei;cpa_model_for_lookbuck;cpa_model_for_sportle;cpa_model_for_stroyvitrina;google_models;cpa_vendor;model_feed_k50_o2_213;blue_offers_k50;beru_offers_liqui_moli;gallery_offers;beru_facebook_variation_partial_revenue_generators;beru_facebook_variation_partial_entry_goods;beru_facebook_variation_partial_hidden_gems;beru_facebook_variation_partial_budget_wasters;b2b_market;white_recipe_k50
b2b_mercury_table = //home/market/production/yamarec/master/performance/banner/data/mdm/mercury_items_MMDM-11489
yt_pool = market-testing-indexer

[banner_mapper]
geobase_xml_path = /var/lib/yandex/market-data-getter/geobase/recent/geobase.xml
geo2_c2p_path = /var/lib/yandex/market-data-getter/geobase/recent/geo2.c2p
nordstream_path = /var/lib/yandex/market-data-getter/nordstream/recent/nordstream.pb.sn
ns_regions = 1,2,35,39,43,47,50,51,54,55,56,65,172,193,213,969,10174,10747
ban_unknown_warehouses = true


[s3-mds]
host = s3.mdst.yandex.net

[shows]
enabled = true
publish = true

[index]
big_launch = on
indexation_offers = on
indexation_models = off
direct_archive_offers = on
annindex_offers = on
ann_archive_offers = off
sent_offers = on
attributes_offers = off
merge_portions_offers = on
merge_arch_portions_offers = on
merge_ann_portions_offers = on
merge_attributes_portions_offers = off
merge_attributes_portions_offers_blue_shard = false
offers_indexer_lite_mode = on
arc_working_dir = indexarc.v1/workindex
enable_recipes_in_nid_search_literals_builder = true
skip_old_knn = on
read_thread_count = 8
docs_in_portion_offers = 100000
docs_in_annportion_offers = 100000
portion_size_mb_offers = 2000000000
annportion_size_mb_offers = 2000000000
yt_data_size_per_job = 1024
merge_and_compress_arc = true
yt_compressed_arc = true
operation_weight = 10
dump_aa_index_offers = true
input_copy_files_optimization = true
input_files = getter/currency_rates/currency_rates.xml, getter/mbi/delivery_holidays.xml, shops-utf8.dat.report.generated, getter/mstat_experiments/waremd5_ctr_per_ware_md5, snapshot.meta, getter/category_panther/category-panther.mmap
indexation_blue_offers = false
merge_blue_idx_portions_offers = false
merge_blue_arch_portions_offers = false
merge_blue_ann_portions_offers = false
merge_blue_attributes_portions_offers = false
skip_offers_indexer_blue_shard = true
skip_old_knn_blue_shard = true
working_dir_blue_shard = workindex
arc_working_dir_blue_shard = indexarc.v1/workindex
indexation_offers_blue_shard = false
merge_idx_portions_offers_blue_shard = false
merge_arch_portions_offers_blue_shard = false
merge_ann_portions_offers_blue_shard = false
filter_covid_helpers = true
store_all_bigrams_in_counts = true
in_yt = true

[custom_streams]
stream_keep_count = 1
web_data_keep_count = 1
prepare_web_streams_for_offers = true
join_web_streams_for_offers = true
prepare_web_streams_for_models = true
join_web_streams_for_models = true
join_model_aliases = true
generation_image_streams_for_offers = true
generation_image_streams_for_models = true
preprocess_image_streams_for_offer = false
preprocess_image_streams_for_models = false
join_image_streams_for_models = false
join_image_streams_for_offers = true
join_experimental_streams_for_models = true
join_experimental_streams_for_offers = true
preprocess_description_streams = true
generation_description_streams = true
join_description_streams = true
preprocess_ad_streams = true
generation_ad_streams = true
join_ad_streams_for_models = true
prepare_orders_for_offers = true
join_orders_for_offers = true
join_orders_for_models = true
prepare_offer_streams = true
join_titles_for_offers = true
join_titles_for_models = true
preprocess_micro_model_descriptions = true
prepare_knn_for_offers = false
prepare_knn_for_models = false
join_knn_for_offers = false
join_knn_for_models = false
join_recipe_for_models = true
join_recipe_for_offers = true
generation_recipe_for_offers = true
prepare_blue_market_streams = true
join_blue_market_streams_for_offers = true
prepare_blue_web_streams = true
join_blue_web_streams_for_offers = true
prepare_model_streams_for_blue_offers = true
join_model_streams_for_blue_offers = true
prepare_model_marketing_descriptions = true
join_marketing_descriptions_for_models = true
prepare_marketing_descr_streams_for_blue_offers = true
join_marketing_descriptions_for_blue_offers = true
prepare_micro_model_descr_streams_for_blue_offers = true
join_micro_model_descriptions_for_blue_offers = true
prepare_offers_texts_for_msku = true
join_msku_offer_titles_for_offers = true
join_msku_offer_texts_for_offers = true
join_msku_offer_titles_for_blue_offers = true
join_msku_offer_texts_for_blue_offers = true
prepare_offers_web_streams_for_msku = true
prepare_blue_offers_web_streams_for_msku = true
join_msku_web_streams_for_offers = true
join_msku_web_streams_for_blue_offers = true
join_micro_model_descriptions_for_models = true
web_streams_use_pokupki_domain = true
prepare_model_streams_for_white_offers = true
prepare_cpa_queries_for_blue_offers = true
join_cpa_queries_for_models = true
join_cpa_queries_for_blue_offers = true
join_cpa_queries_for_white_offers = true
cpa_streams_prepare_last_day = true
cpa_streams_merge_days = true
cpa_streams_replication_cluster = stratocaster
yt_cpa_streams_replication_proxy = arnold
yt_cpa_streams_proxy = hahn
merge_blue_web_features_to_white = true
collect_supplier_descr_for_msku = true
glue_streams_enabled = true
preprocess_metadoc_streams_enabled = true
preprocess_metadoc_streams_collect_nids = true

[indexfactorann]
indexation_offers = on
indexation_models = on
indexation_blue_offers = off

[indexann]
indexation_offers = off
indexation_models = off
big_parts = true

[panther]
indexation_offers = on
indexation_models = on
indexation_blue_offers = off
indexationexp_offers = on
indexationexp_models = on
indexationexp_blue_offers = off
indexationexp2_offers = on
indexationexp2_blue_offers = off
indexation_other = on
use_optimal = true
from_portions = true
from_yt_counts = true
in_yt = true

[dumpers]
prepare_model2sku_mmap = true
prepare_model2sku_csv = true
prepare_model2sku_csv_white = true
prepare_model_transitions = true

[qpipe.prices]
enabled = true
send_to_saashub = false

[qpipe.snapshoter]
prices_daemon_enabled = false
take_snapshots = prices

[mbi_qdata_reporter]
enabled = true
publish_data = true

[publish.async]
zk_reconfigure_enabled = true
generations_prefix = generations
mode = enabled
upload_zk_to_mds = true
release_threshold = 100
publish_blue = false
publish_blue_from_white = false
pinger_url = http://mi01ht.market.yandex.net/yandex/report-pinger/report.json
ignore_not_for_publish = true
async_publish_search_part_base_dist_early = true
async_copybases = true

[feedlog]
colored = false
account_smart_index_offers_in_feedlog_parse_stats = True

[indexknn]
build_knn_for_offers = on
build_knn_for_models = on
prepare_image_category_white_knn = off
prepare_image_category_white_knn_offers = off
image_category_white_knn = false
image_category_white_knn_offers = false
build_vectors_for_category_knn = false
build_vectors_for_category_knn_offers = false
category_knn_with_constraints = off
category_knn_offers_with_constraints = off
use_reformulation_dssm = true
prepare_image_red_knn = off
image_red_knn = off
build_vectors_for_red_knn = off
yt_knn_for_models = true

[indexcatengine]
preprocess_catengine_for_models_async = on
preprocess_catengine_for_models_pipeline = false
build_catengine_for_models = on
transfer_data_for_catengine = on

[quick_promo]
enabled = true
max_mmap_size = 77000111

[avatars]
int_mds_host = avatars-int.mds.yandex.net
int_mds_port = 13000
mds_namespace = marketpictesting

[blue_price_history]
days_in_window = 5
price_history_total_days = 1
price_history_add_days_for_min_price = 1

[freshness]
control_feed_id = 200303249
balancer_url = http://report.tst.vs.market.yandex.net:17051/yandsearch?
send_freshness_stats = true

[timeouts]
timeout_global = 21600

[wizard-data]
commit_wizard_data_to_robot_branch = false
commit_wizard_data_with_sb = true
upload_shop_aliases_to_yt = true
download_shop_aliases_from_yt = true

[ferryman]
enabled = false
diff_quota = 55000000
genlog_mode = false

[arc2ferryman]
cards_enabled = true
cards_working_dir = /var/lib/yandex/indexer/market/cards
wizard_enabled = true
wizard_working_dir = /var/lib/yandex/indexer/market/wizard
sailor_nanny = testing_market_sailor_vla
send_to_ferryman = false

[replica]
yt_proxy_replica = hahn
yt_proxy_replica_src = arnold
use = true

[market_yt_data_upload]
enable_upload_sku_export = true

[mapreduce_genlogs]
upload_gl_mbo = false
genlog_keep_count = 2
dynamic_filters = true
calc_genlog_for_blue_shard = false
use_parameters_mapping = true

[trace_offers]
tracing_offers_log_path = /var/log/marketindexer
enable_tracing_for_blue_1p_offers = true
enable_tracing_for_blue_3p_offers = true
enabled_for_offer_processor = true
with_finished_offers = true

[or-sessions-logs]
s3_bucket = market-idx-test-or-sessions-logs

[or-feed-archive]
s3_bucket = market-idx-test-or-feed-archive

[mbo-preview]
enabled = true
keep_generation = 1

[saas_hub.qbid]
daemon_enabled = false
dryrun = false

[dropdown]
enable_calclulate_unshown = true
yt_pos_table = //home/market/testing/indexer/stratocaster/in/PoS/recent
shopsdat = //home/market/testing/indexer/stratocaster/in/shopsdat/recent
new_offer_threshold = 7
enabled = true
use_pos = true
enable_to_proces_log = true
ignore_mock_shops = true
use_season = false
use_auto_extending = true
use_pos_with_auto_extending = true
shows_threshold = 4
enable_bulk_insert = true

[merge_processlog]
enable_bulk_insert = true

[genlog_dumper]
enable = true
dssm_from_main_genlog = false
optional_types = ["BIDS_TIMESTAMPS", "AMORE_DATA", "USED_GOODS", "SHOP_CATEGORY_IDS_DUMPER"]
dumper_dir_blue_shard = workindex
enable_for_blue_shard = false
gl_sc_enable = true
dssm_vanilla = false
vanilla = false
used_goods_sku_path = /usr/share/market-svn-data/used_goods_sku_testing.txt
separate_ctr = true

[dssm_mapper]
enable = true
enable_for_blue_shard = false
cpu_limit = 1
data_size_per_job_mb=25
categorizer_mapper_memory_limit_mb = 4096
categorizer_reducer_memory_limit_mb = 8192

[dssm]
enable_hard2_dssm_for_models = true
enable_hard2_dssm_for_books = true
enable_hard2_dssm_for_offers = true
enable_hard2_dssm_for_blue_offers = true
enable_reformulation_dssm_for_models = true
enable_reformulation_dssm_for_books = true
enable_reformulation_dssm_for_offers = true
enable_reformulation_dssm_for_blue_offers = true
enable_bert_dssm = true
enable_super_embed = true
enable_assessment_binary = true
enable_assessment = true
enable_click = true
enable_has_cpa_click = true
enable_cpa = true
enable_billed_cpa = true
use_compressed_dssm_models = true
hard2_model_path = /usr/lib/yandex/indexer/hard2_doc_embedding.adssm
reformulation_model_path = /usr/lib/yandex/indexer/reformulation_doc_embedding.adssm
bert_model_path = /usr/lib/yandex/indexer/bert_doc_embedding.adssm
super_embed_model_path = /usr/lib/yandex/indexer/superembed_doc.adssm
assessment_binary_model_path = /usr/lib/yandex/indexer/assessment_binary.dssm
assessment_model_path = /usr/lib/yandex/indexer/assessment.dssm
click_model_path = /usr/lib/yandex/indexer/click.dssm
has_cpa_click_model_path = /usr/lib/yandex/indexer/has_cpa_click.dssm
cpa_model_path = /usr/lib/yandex/indexer/cpa.dssm
billed_cpa_model_path = /usr/lib/yandex/indexer/billed_cpa.dssm
split=true

[click_sim]
enable_click_sim = true
enable_click_sim_for_models = true
click_sim_offer_vectors=//home/videorecom/market/click_sim/offer_vectors.zstd
click_sim_blue_offer_vectors=//home/videorecom/market/click_sim/blue_offer_vectors.zstd
click_sim_model_vectors = /var/lib/yandex/market-data-getter/yt_click_sim/recent/model_vectors.trie

[bm_categories]
enable_bm_categories = true
enable_bm_categories_for_models = false
neural_catalogia_path_for_models = /usr/lib/yandex/indexer/catalogia_neural_data

[check_stats_distribution]
disable_num_offers_with_discount = true
disable_num_blue_offers_with_discount = true
enabled = true
generation_count = 10
default_good_offers_with_cluster_num = 20.0
default_num_blue_1p_offers = 20.0
default_num_blue_1p_offers_with_delivery = 20.0
default_num_blue_offers = 20.0
default_num_blue_offers_with_delivery = 20.0
default_num_buybox_offers = 20.0
default_num_clusters = 20.0
default_num_clusters_good = 20.0
default_num_disabled_offers = 20.0
default_num_fake_msku_offers = 20.0
default_num_offers = 20.0
default_num_offers_with_all_ava = 20.0
default_num_offers_with_ava = 20.0
default_num_offers_with_cat_book = 20.0
default_num_offers_with_cat_root = 20.0
default_num_offers_with_cluster = 20.0
default_num_offers_with_cluster_good = 20.0
default_num_offers_with_discount = 20.0
default_num_offers_with_model = 20.0
default_num_offers_with_model_book = 20.0
default_num_offers_with_picurl = 20.0
default_num_offers_with_thumbs = 20.0
default_num_offers_with_vendor = 20.0
default_num_red_offers = 20.0
default_num_white_offers = 20.0
default_offers_with_cluster_num = 20.0
default_num_blue_offers_with_discount = 80.0
default_num_white_push_offers = 30.0

[offer_status]
enabled = true
blue_shard_enabled = false
prepare_datacamp_publication_status_diff_url = https://datacamp-admin.white.tst.vs.market.yandex.net/prepare_publication_status_diff?cluster=arnold&color=white&color=blue
prepare_datacamp_publication_status_diff = true
do_copy_datacamp = false
offer_version_prepare = true

[health]
indexation_feedlog_enabled = true

[export_shop_categories]
enable = true

[yt_knn]
from_genlog = true
enable_yt = true
enable_yt_for_blue_shard = false
uniq_dssms = true

[checked_yt_tables]
enable = true
enable_prepare = true
yt.yt_offer_conversions = //home/market/testing/indexer/stratocaster/checked_yt_tables/yt/yt_offer_conversions/recent
yt.yt_offer_conversions_enabled = true
yt.yt_mstat_top_queries_offer_table = //home/market/testing/indexer/stratocaster/checked_yt_tables/yt/yt_mstat_top_queries_offer_table/recent
yt.yt_mstat_top_queries_offer_table_enabled = true
yt.yt_blue_promo_gwp_table = //home/market/testing/indexer/stratocaster/checked_yt_tables/yt/yt_blue_promo_gwp_table/recent
yt.yt_blue_promo_gwp_table_enabled = true
yt.yt_blue_price_limit_external = //home/market/testing/indexer/stratocaster/checked_yt_tables/yt/yt_blue_price_limit_external/recent
yt.yt_blue_price_limit_external_enabled = true
yt.yt_buybox_elasticity_table = //home/market/testing/indexer/stratocaster/checked_yt_tables/yt/yt_buybox_elasticity_table/recent
yt.yt_buybox_elasticity_table_enabled = true
yt.yt_mstat_top_queries_all_table = //home/market/testing/indexer/stratocaster/checked_yt_tables/yt/yt_mstat_top_queries_all_table/recent
yt.yt_mstat_top_queries_all_table_enabled = true
yt.yt_blue_promocode_table = //home/market/testing/indexer/stratocaster/checked_yt_tables/yt/yt_blue_promocode_table/recent
yt.yt_blue_promocode_table_enabled = true
yt.ir_msku_image_signatures_dir = //home/market/testing/indexer/common/checked_yt_tables/yt/yt_ir_msku_image_signatures_table
yt.ir_msku_image_signatures_dir_enabled = true
yt.yt_promo_collector_table = //home/market/testing/indexer/stratocaster/checked_yt_tables/yt/yt_promo_collector_table/recent
yt.yt_promo_collector_table_enabled = true
yt.yt_yamarec_pytorch_dssm_table=//home/market/testing/indexer/common/checked_yt_tables/yt/yt_yamarec_pytorch_dssm_table/recent

[delivery]
delivery_stats_enabled = true
delivery_dictionary_tables_dir = //home/market/testing/indexer/stratocaster/out/delivery/generations

[publish.access]
publish_delivery_to_access = true
publish_madv_data_to_access = true
publish_report_shops_data_to_access = true
publish_geobase_to_access = true
host = access.tst.vs.market.yandex.net
port = 8080

[service_offer]
enable_build_white = true
collapse_express_offer_white = true

[metadoc_offer]
enable_reduced_msku = true
enable_filter_msku_from_genlog = true
use_reduced_msku = true
enable_region_literals = true
merge_genlog_in_reducer = true
add_more_literals = true
portions_in_msku_reducer = true

[lavka]
indexation_enabled = true
export_folder = //home/turbo_pages/testing/lavka/translated_export
offers_table_path = //home/market/testing/indexer/datacamp/united/lavka_out/recent
min_num_offers = 2000
max_num_offers = 2000000
picture_enable = true
picture_orig_width = 1600
picture_orig_height = 1200
picture_thumb_mask = 4611686018427430976
avatars_namespace = grocery-goods

[yt_used_resources]
enable = true
ypath_list = //home/market/testing/indexer/stratocaster,//home/market/testing/indexer/datacamp,//home/market/testing/indexer/picrobot
special_ypath_list = //home/market/testing/indexer/stratocaster/mi3/main/last_complete,//home/market/testing/indexer/datacamp/united/basic_offers,//home/market/testing/indexer/datacamp/united/service_offers,//home/market/testing/indexer/datacamp/united/actual_service_offers

[tsum_timeline]
send_events_to_tsum = true
tsum_api_endpoint = https://tsum-api.market.yandex.net:4203
tsum_send_timeout = 60

[stats]
use_all_files = false
async_visual_cluster_wizard = false

[publish]
publish_search_stats_from_workers = false

[delivery_upload]
delivery_upload_yt_path_white = //home/market/testing/indexer/stratocaster/delivery/generations
delivery_upload_yt_lock_path_white = //home/market/testing/indexer/stratocaster/delivery/lock
delivery_upload_files_dir = /var/lib/yandex/indexer/market/market_delivery_white
delivery_upload_files_dir_white = /var/lib/yandex/indexer/market/market_delivery_white
delivery_upload_files_dir_blue = /var/lib/yandex/indexer/market/market_delivery_blue
num_workers = 10
num_retry = 100
delivery_upload_periodical_enabled = true
validate_delivery_bucket_ids = true
delivery_upload_yt_path_blue = //home/market/testing/indexer/stratocaster/delivery/blue_generations
delivery_upload_yt_lock_path_blue = //home/market/testing/indexer/stratocaster/delivery/blue_lock

[delivery_download]
delivery_download_run_in_build_mass_index_white = true
delivery_downloader_download_modifiers = true
delivery_downloader_download_buckets = true
enable_flat_courier_renumber = true
delivery_downloader_collect_russian_post_buckets = true

[indexerf]
prepare_erf_web_features = true
prepare_herf_web_features = true
prepare_web_features_for_models = true
prepare_web_features_for_blue = true
prepare_cgi_params = true
normalize_market_urls_for_offers = true
join_erf_with_offers = true
join_herf_with_offers = true
join_erf_blue_features_for_white_shards = true
enrich_erf_features_by_blue_erf_features_for_offers = true
enrich_erf_features_for_offers = true
enrich_erf_features_by_color_for_offers = true
build_erf_for_offers = true
build_herf_for_offers = true
erf_indexdir = workindex
build_erf_for_models = true
build_herf_for_models = true
join_erf_with_book = true
join_herf_with_book = true
build_erf_for_books = true
build_herf_for_books = true
erf_remap_dir =
erf_replication_cluster = stratocaster
yt_erf_replication_proxy = hahn.yt.yandex.net
join_erf_with_blue_offers = true
join_herf_with_blue_offers = true
join_erf_sku_features_with_blue_offers = true
join_sku_erf_with_blue_offers = true
enrich_erf_features_for_blue_offers = true
enrich_by_sku_erf_id_for_blue = true
build_erf_for_blue_offers = true
build_herf_for_blue_offers = true
build_sku_erf_for_blue_offers = true
build_enriched_erf_for_blue_offers = true
join_erf_with_blue_shard = false
join_herf_with_blue_shard = false
join_erf_sku_features_with_blue_shard = false
join_sku_erf_with_blue_shard = false
enrich_erf_features_for_blue_shard = false
build_erf_blue_shard = false
build_herf_for_blue_shard = false
build_sku_erf_for_blue_shard = false
build_enriched_erf_for_blue_shard = false
prepare_web_pokupki_domain = true
prepare_web_pokupki_domain_join = true
merge_normalized_market_urls = true
merge_joined_erf_features = true
merge_joined_erf_sku_features_for_blue_offers = true
merge_joined_sku_erf = true
merge_enriched_erf_features = true

[uc]
enable_calculate_uc_age = true
enable_sending_uc_age = true

[slowinfo_update]
cards_keep_generation_count = 1
books_keep_generation_count = 1

[two_phase_reload]
two_phase_set_not_for_publish_on_fail = true
meta_pinger_wait_time = 0

[two_phase_reload_meta:test_report_meta_market@atlantis]
enabled = true
base_group = test_report_market@atlantis
dc_allowed_for_reload = sas
run_integration_test = false
check_report_errors = false
check_report_timings = false

[contex]
msku_uploader_enabled = true
main_idx_enabled = true

[check_report]
enable_check_report_timings = false
check_timings_dry_run = false
check_timings_threshold = 0.9

[genlog_integrity_check]
snippet_history_price_confidence = 9
snippet_recommended_price_confidence = 9
binary_recommended_price_confidence = 9
binary_allowed_oldprice_confidence = 9
binary_history_price_confidence = 9
binary_min_price_confidence = 9
publisher_confidence = 6
pictures_confidence = 6
pictures_proto_base64_confidence = 6
threshold = 0.9

[sailor]
enabled = true
nanny_service = testing_market_sailor_vla
collection_type = OFFER
offers_converter_ignore_blue = false

[numerator]
numerator_enabled = false
primary_medium = ssd_blobs
yt_dir = //home/market/testing/indexer/stratocaster/mi3/docid_state

[ecom_export]
enable_export_offers = false
enable_export_offers_merged = false

[eda]
split_eda_enabled = true
indexation_enabled = true
offers_table_path = //home/market/testing/indexer/datacamp/united/eda_out/recent
min_num_offers = 150000
max_num_offers = 28000000
picture_enable = true
picture_orig_width = 1600
picture_orig_height = 1200
picture_thumb_mask = 4611686018427430976
avatars_namespace = eda
restaurants_indexation_enabled = false
restaurants_offers_table_path = //home/market/testing/indexer/stratocaster/in/eda/restaurants_offers/recent

[consistency_check]
oi_input_threshold = 0.0

[generation_unit_sizes_check]
offer_promo_mmap_per_offer_confidence = 20

[category_panther]
indexation = true

[models]
separate-postprocess = true
parallel-model-torrents = true
calc-dssms = true

[anndata]
memory_limit = 5120
in_yt = true

[models_export]
model_transitions = /var/lib/yandex/indexer/market/last_complete/input/mbo/model_transitions.pb

[glue]
tvm_client_id = 2009733
tvm_secret_uuid = sec-01dq7m7g2pgs0rhhq3xhn1r4d8
use_full_maker = true
offers_enabled = true
run_glue_converter = true
mskus_enabled = true

[image_factors]
join_offers = true
join_msku = true
enrich_with_genlog = true
dump_i2t_v10 = true
categories = 7877999

[pic_maker]
enable_image2text_v10 = true
