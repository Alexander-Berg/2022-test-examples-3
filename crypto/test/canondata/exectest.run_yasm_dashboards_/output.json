{
    "menu": [
        {
            "children": [
                {
                    "children": [
                        {
                            "children": [
                                {
                                    "children": [], 
                                    "item_id": "crypta-devops", 
                                    "name": "devops_production", 
                                    "owners": [
                                        "cherenkov-p-a", 
                                        "dkuksa", 
                                        "kolontaev", 
                                        "levanov", 
                                        "r-andrey"
                                    ], 
                                    "substitutions": {
                                        "ctype": "production", 
                                        "itype": "yp", 
                                        "prj": "crypta-cm-api"
                                    }, 
                                    "title": "Devops Production", 
                                    "type": "template_panel"
                                }, 
                                {
                                    "children": [], 
                                    "item_id": "crypta-devops", 
                                    "name": "devops_testing", 
                                    "owners": [
                                        "cherenkov-p-a", 
                                        "dkuksa", 
                                        "kolontaev", 
                                        "levanov", 
                                        "r-andrey"
                                    ], 
                                    "substitutions": {
                                        "ctype": "testing", 
                                        "itype": "yp", 
                                        "prj": "crypta-cm-api"
                                    }, 
                                    "title": "Devops Testing", 
                                    "type": "template_panel"
                                }
                            ], 
                            "name": "api", 
                            "owners": [
                                "cherenkov-p-a", 
                                "dkuksa", 
                                "kolontaev", 
                                "levanov", 
                                "r-andrey"
                            ], 
                            "title": "API", 
                            "type": "dummy"
                        }, 
                        {
                            "children": [
                                {
                                    "children": [], 
                                    "item_id": "crypta-devops", 
                                    "name": "devops_production", 
                                    "owners": [
                                        "cherenkov-p-a", 
                                        "dkuksa", 
                                        "kolontaev", 
                                        "levanov", 
                                        "r-andrey"
                                    ], 
                                    "substitutions": {
                                        "ctype": "production", 
                                        "itype": "yp", 
                                        "prj": "crypta-cm-rt-duid-uploader-to-cm"
                                    }, 
                                    "title": "Devops Production", 
                                    "type": "template_panel"
                                }, 
                                {
                                    "children": [], 
                                    "item_id": "crypta-devops", 
                                    "name": "devops_testing", 
                                    "owners": [
                                        "cherenkov-p-a", 
                                        "dkuksa", 
                                        "kolontaev", 
                                        "levanov", 
                                        "r-andrey"
                                    ], 
                                    "substitutions": {
                                        "ctype": "testing", 
                                        "itype": "yp", 
                                        "prj": "crypta-cm-rt-duid-uploader-to-cm"
                                    }, 
                                    "title": "Devops Testing", 
                                    "type": "template_panel"
                                }
                            ], 
                            "name": "cm_duid_uploader", 
                            "owners": [
                                "cherenkov-p-a", 
                                "dkuksa", 
                                "kolontaev", 
                                "levanov", 
                                "r-andrey"
                            ], 
                            "title": "CM Duid Uploader", 
                            "type": "dummy"
                        }, 
                        {
                            "children": [
                                {
                                    "children": [], 
                                    "item_id": "crypta-devops", 
                                    "name": "devops_production", 
                                    "owners": [
                                        "cherenkov-p-a", 
                                        "dkuksa", 
                                        "kolontaev", 
                                        "levanov", 
                                        "r-andrey"
                                    ], 
                                    "substitutions": {
                                        "ctype": "production", 
                                        "itype": "yp", 
                                        "prj": "crypta-cm-mutator"
                                    }, 
                                    "title": "Devops Production", 
                                    "type": "template_panel"
                                }, 
                                {
                                    "children": [], 
                                    "item_id": "crypta-devops", 
                                    "name": "devops_testing", 
                                    "owners": [
                                        "cherenkov-p-a", 
                                        "dkuksa", 
                                        "kolontaev", 
                                        "levanov", 
                                        "r-andrey"
                                    ], 
                                    "substitutions": {
                                        "ctype": "testing", 
                                        "itype": "yp", 
                                        "prj": "crypta-cm-mutator"
                                    }, 
                                    "title": "Devops Testing", 
                                    "type": "template_panel"
                                }
                            ], 
                            "name": "mutator", 
                            "owners": [
                                "cherenkov-p-a", 
                                "dkuksa", 
                                "kolontaev", 
                                "levanov", 
                                "r-andrey"
                            ], 
                            "title": "Mutator", 
                            "type": "dummy"
                        }
                    ], 
                    "name": "cookie_matching", 
                    "owners": [
                        "cherenkov-p-a", 
                        "dkuksa", 
                        "kolontaev", 
                        "levanov", 
                        "r-andrey"
                    ], 
                    "title": "Cookie Matching", 
                    "type": "dummy"
                }, 
                {
                    "children": [
                        {
                            "children": [
                                {
                                    "children": [], 
                                    "item_id": "crypta-devops", 
                                    "name": "devops_production", 
                                    "owners": [
                                        "cherenkov-p-a", 
                                        "dkuksa", 
                                        "kolontaev", 
                                        "levanov", 
                                        "r-andrey"
                                    ], 
                                    "substitutions": {
                                        "ctype": "production", 
                                        "itype": "yp", 
                                        "prj": "crypta-ext-fp-matcher"
                                    }, 
                                    "title": "Devops Production", 
                                    "type": "template_panel"
                                }, 
                                {
                                    "children": [], 
                                    "item_id": "crypta-devops", 
                                    "name": "devops_testing", 
                                    "owners": [
                                        "cherenkov-p-a", 
                                        "dkuksa", 
                                        "kolontaev", 
                                        "levanov", 
                                        "r-andrey"
                                    ], 
                                    "substitutions": {
                                        "ctype": "testing", 
                                        "itype": "yp", 
                                        "prj": "crypta-ext-fp-matcher"
                                    }, 
                                    "title": "Devops Testing", 
                                    "type": "template_panel"
                                }
                            ], 
                            "name": "matcher", 
                            "owners": [
                                "cherenkov-p-a", 
                                "dkuksa", 
                                "kolontaev", 
                                "levanov", 
                                "r-andrey"
                            ], 
                            "title": "Matcher", 
                            "type": "dummy"
                        }
                    ], 
                    "name": "external_fp", 
                    "owners": [
                        "cherenkov-p-a", 
                        "dkuksa", 
                        "kolontaev", 
                        "levanov", 
                        "r-andrey"
                    ], 
                    "title": "External FP", 
                    "type": "dummy"
                }, 
                {
                    "children": [
                        {
                            "children": [
                                {
                                    "children": [], 
                                    "item_id": "crypta-devops", 
                                    "name": "devops_production", 
                                    "owners": [
                                        "cherenkov-p-a", 
                                        "dkuksa", 
                                        "kolontaev", 
                                        "levanov", 
                                        "r-andrey"
                                    ], 
                                    "substitutions": {
                                        "ctype": "production", 
                                        "itype": "yp", 
                                        "prj": "crypta-siberia-core"
                                    }, 
                                    "title": "Devops Production", 
                                    "type": "template_panel"
                                }, 
                                {
                                    "children": [], 
                                    "item_id": "crypta-devops", 
                                    "name": "devops_testing", 
                                    "owners": [
                                        "cherenkov-p-a", 
                                        "dkuksa", 
                                        "kolontaev", 
                                        "levanov", 
                                        "r-andrey"
                                    ], 
                                    "substitutions": {
                                        "ctype": "testing", 
                                        "itype": "yp", 
                                        "prj": "crypta-siberia-core"
                                    }, 
                                    "title": "Devops Testing", 
                                    "type": "template_panel"
                                }
                            ], 
                            "name": "core", 
                            "owners": [
                                "cherenkov-p-a", 
                                "dkuksa", 
                                "kolontaev", 
                                "levanov", 
                                "r-andrey"
                            ], 
                            "title": "Core", 
                            "type": "dummy"
                        }, 
                        {
                            "children": [
                                {
                                    "children": [], 
                                    "item_id": "crypta-devops", 
                                    "name": "devops_production", 
                                    "owners": [
                                        "cherenkov-p-a", 
                                        "dkuksa", 
                                        "kolontaev", 
                                        "levanov", 
                                        "r-andrey"
                                    ], 
                                    "substitutions": {
                                        "ctype": "production", 
                                        "itype": "yp", 
                                        "prj": "crypta-siberia-describer"
                                    }, 
                                    "title": "Devops Production", 
                                    "type": "template_panel"
                                }, 
                                {
                                    "children": [], 
                                    "item_id": "crypta-devops", 
                                    "name": "devops_testing", 
                                    "owners": [
                                        "cherenkov-p-a", 
                                        "dkuksa", 
                                        "kolontaev", 
                                        "levanov", 
                                        "r-andrey"
                                    ], 
                                    "substitutions": {
                                        "ctype": "testing", 
                                        "itype": "yp", 
                                        "prj": "crypta-siberia-describer"
                                    }, 
                                    "title": "Devops Testing", 
                                    "type": "template_panel"
                                }
                            ], 
                            "name": "describer", 
                            "owners": [
                                "cherenkov-p-a", 
                                "dkuksa", 
                                "kolontaev", 
                                "levanov", 
                                "r-andrey"
                            ], 
                            "title": "Describer", 
                            "type": "dummy"
                        }, 
                        {
                            "children": [
                                {
                                    "children": [], 
                                    "item_id": "crypta-devops", 
                                    "name": "devops_production", 
                                    "owners": [
                                        "cherenkov-p-a", 
                                        "dkuksa", 
                                        "kolontaev", 
                                        "levanov", 
                                        "r-andrey"
                                    ], 
                                    "substitutions": {
                                        "ctype": "production", 
                                        "itype": "yp", 
                                        "prj": "crypta-siberia-mutator"
                                    }, 
                                    "title": "Devops Production", 
                                    "type": "template_panel"
                                }, 
                                {
                                    "children": [], 
                                    "item_id": "crypta-devops", 
                                    "name": "devops_testing", 
                                    "owners": [
                                        "cherenkov-p-a", 
                                        "dkuksa", 
                                        "kolontaev", 
                                        "levanov", 
                                        "r-andrey"
                                    ], 
                                    "substitutions": {
                                        "ctype": "testing", 
                                        "itype": "yp", 
                                        "prj": "crypta-siberia-mutator"
                                    }, 
                                    "title": "Devops Testing", 
                                    "type": "template_panel"
                                }
                            ], 
                            "name": "mutator", 
                            "owners": [
                                "cherenkov-p-a", 
                                "dkuksa", 
                                "kolontaev", 
                                "levanov", 
                                "r-andrey"
                            ], 
                            "title": "Mutator", 
                            "type": "dummy"
                        }, 
                        {
                            "children": [
                                {
                                    "children": [], 
                                    "item_id": "crypta-devops", 
                                    "name": "devops_production", 
                                    "owners": [
                                        "cherenkov-p-a", 
                                        "dkuksa", 
                                        "kolontaev", 
                                        "levanov", 
                                        "r-andrey"
                                    ], 
                                    "substitutions": {
                                        "ctype": "production", 
                                        "itype": "yp", 
                                        "prj": "crypta-siberia-segmentator"
                                    }, 
                                    "title": "Devops Production", 
                                    "type": "template_panel"
                                }, 
                                {
                                    "children": [], 
                                    "item_id": "crypta-devops", 
                                    "name": "devops_testing", 
                                    "owners": [
                                        "cherenkov-p-a", 
                                        "dkuksa", 
                                        "kolontaev", 
                                        "levanov", 
                                        "r-andrey"
                                    ], 
                                    "substitutions": {
                                        "ctype": "testing", 
                                        "itype": "yp", 
                                        "prj": "crypta-siberia-segmentator"
                                    }, 
                                    "title": "Devops Testing", 
                                    "type": "template_panel"
                                }
                            ], 
                            "name": "segmentator", 
                            "owners": [
                                "cherenkov-p-a", 
                                "dkuksa", 
                                "kolontaev", 
                                "levanov", 
                                "r-andrey"
                            ], 
                            "title": "Segmentator", 
                            "type": "dummy"
                        }
                    ], 
                    "name": "siberia", 
                    "owners": [
                        "cherenkov-p-a", 
                        "dkuksa", 
                        "kolontaev", 
                        "levanov", 
                        "r-andrey"
                    ], 
                    "title": "Siberia", 
                    "type": "dummy"
                }
            ], 
            "name": "crypta", 
            "owners": [
                "cherenkov-p-a", 
                "dkuksa", 
                "kolontaev", 
                "levanov", 
                "r-andrey"
            ], 
            "title": "Crypta", 
            "type": "dummy"
        }
    ], 
    "templates": [
        {
            "abc": "CryptaIS", 
            "content": "{\n<% set main_layout = create_main_layout('horizontal', default_width=4, default_height=1)%>\n<% set perc_metrics = [\n  (\"cpu_usage_slot_hgram\", \"cpu_guarantee_slot_hgram\", \"CPU Usage %\"),\n  (\"anon_usage_slot_hgram\", \"memory_limit_slot_hgram\", \"Mem Usage %\"),\n]%>\n  \"charts\": [\n  <% set geos = list_geo(itype=itype, prj=prj, ctype=ctype) %>\n  <% for geo in geos %>\n    <% set tag = \"itype=\" ~ itype ~ \"; ctype=\" ~ ctype ~ \"; prj=\" ~ prj ~ \"; geo=\" ~ geo %>\n    <% set panels_layout = main_layout.sub('vertical', default_width=4, default_height=1) %>\n    <% set hosts = list_hosts(itype=itype, ctype=ctype, prj=prj, geo=geo) %>\n    <% for usage_metric, guarantee_metric, label in perc_metrics %>\n        {\n          << panels_layout.coords() >>,\n          \"consts\": [],\n          \"description\": \"\",\n          \"minValue\": 0,\n          \"maxValue\": 100,\n          \"normalize\": false,\n          \"signals\": [\n            <% for host in hosts %>\n            {\n              \"host\": \"<< host >>\",\n              \"name\": \"mul(div(havg(portoinst-<< usage_metric >>), havg(portoinst-<< guarantee_metric >>)), 100)\",\n              \"normalizable\": false,\n              \"tag\": \"<< tag >>\",\n              \"title\": \"<<host>>\",\n            },\n            <% endfor %>\n          ],\n          \"stacked\": false,\n          \"title\": \"[<<geo>>] << label >>\",\n          \"type\": \"graphic\",\n        },\n    <% endfor %>\n\n    <% set network = [\n        (\"net_rx_mb_summ\", \"RX MBps (MTN)\"),\n        (\"net_mb_summ\", \"TX MBps\"),\n    ] %>\n    <% for sensor, label in network %>\n     {\n        << panels_layout.coords() >>,\n        \"consts\": [],\n        \"description\": \"\",\n        \"minValue\": 0,\n        \"normalize\": true,\n        \"signals\": [\n        <% for host in hosts %>\n            {\n              \"host\": \"<< host >>\",\n              \"name\": \"aver(portoinst-<< sensor >>)\",\n              \"normalizable\": true,\n              \"tag\": \"<< tag >>\",\n              \"title\": \"<<host>>\",\n            },\n            <% endfor %>\n        ],\n        \"stacked\": false,\n        \"title\": \"[<<geo>>] << label >>\",\n        \"type\": \"graphic\",\n      },\n    <% endfor %>\n\n    <% set volume_signals = list_signals(pattern='portoinst-volume_(?P<volume>.*?)_usage_hgram', itype=itype, prj=prj, ctype=ctype, geo=geo) %>\n    <% for sig in volume_signals %>\n      <% set volume = sig.sub('volume') %>\n      {\n        << panels_layout.coords() >>,\n        \"consts\": [],\n        \"description\": \"\",\n        \"minValue\": 0,\n        \"maxValue\": 100,\n        \"normalize\": false,\n        \"signals\": [\n            <% for host in hosts %>\n            {\n              \"host\": \"<< host >>\",\n              \"name\": \"portoinst-volume_<< volume >>_usage_perc_txxx\",\n              \"normalizable\": false,\n              \"tag\": \"<< tag >>\",\n              \"title\": \"<<host>>\",\n            },\n            <% endfor %>\n        ],\n        \"stacked\": false,\n        \"title\": \"[<<geo>>] Volume << volume >> usage max %\",\n        \"type\": \"graphic\",\n      },\n    <% endfor %>\n\n    <% set event_signals = [\n        (\"portoinst-starts_summ\", \"Starts\"),\n        (\"portoinst-ooms_summ\", \"OOM\"),\n        (\"hsum(portoinst-ooms_slot_hgram)\", \"Slot OOM\"),\n        (\"hsum(portoinst-cores_total_hgram)cores_total_hgram\", \"Crashes\"),\n        (\"hsum(portoinst-cores_dumped_hgram)\", \"Cores\")\n    ] %>\n    <% for sensor, label in event_signals %>\n    {\n    << panels_layout.coords() >>,\n      \"type\": \"graphic\",\n      \"title\": \"[<<geo>>] <<label>>\",\n      \"description\": \"\",\n      \"yAxis\": [\n        {}\n      ],\n      \"consts\": [],\n      \"minValue\": 0,\n      \"stacked\": false,\n      \"normalize\": true,\n      \"signals\": [\n        <% for host in hosts %>\n        {\n          \"host\": \"<< host >>\",\n          \"name\": \"<< sensor >>\",\n          \"normalizable\": false,\n          \"tag\": \"<< tag >>\",\n          \"title\": \"<<host>>\",\n        },\n        <% endfor %>\n      ]\n    },\n    <% endfor %>\n  <% endfor %>\n  ],\n  \"title\": \"DevOps prj=<<prj>>; ctype=<<ctype>>; geo=<< geos|join(\",\") >>; itype=<<itype>>;\",\n  \"type\": \"panel\",\n}\n", 
            "key": "crypta-devops", 
            "owners": [
                "cherenkov-p-a", 
                "dkuksa", 
                "kolontaev", 
                "levanov", 
                "r-andrey"
            ]
        }
    ]
}
