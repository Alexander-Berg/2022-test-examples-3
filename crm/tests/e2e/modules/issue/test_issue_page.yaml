feature: Модуль задач

specs-integration:
    # Перед каждым тестом создается новая заявка
    #   - do: ввести в поле "Новая задача" заголовок задачи
    #   - do: нажать "Сохранить"

    # После каждого теста переходим к чистому модулю задач
    #   - do: Кликнуть на иконку с задачами в боковой левой панели

    Вход под нужным пользователем:
      - do: прокинуть нужные куки
      - assert: открылась страница с нужным урлом

    Создание задачи - статус:
        - assert: появилась созданная задача в статусе "Открыта"

    Создание задачи - исполнитель:
        - do: проверить имя в поле "Исполнитель"
        - assert: имя совпадает с именем залогинившегося

    Переименовывание задачи:
      - do: два раза кликнуть на заголовке задачи
      - do: ввести новый заголовок и сохраниться
      - assert: проверить наличие нового заголовка на странице

    Закрытие задачи - статус:
        - do: кликнуть по кнопку "Закрыть"
        - assert: статус задачи изменен на "Закрыта"

    Закрытие задачи - иконка:
        - assert: иконка рядом с задачей стала checked

    Переоткрытие задачи - статус:
        - do: кликнуть по кнопку "Открыть"
        - assert: статус задачи изменен на "Открыта"

    Переоткрытие задачи - иконка:
        - assert: иконка рядом с задачей стала unchecked

    Добавление комментария:
        - do: кликнуть по строке "Написать комментарий"
        - do: вставить в поле комментария текст
        - do: кликнуть по кнопке "Сохранить" и обновить страницу
        - assert: текст комментария найден на странице

    Удаление комментария:
        - do: добавить комментарий
        - do: кликнуть по кнопке "Удалить" у комментария
        - do: подтвердить действие
        - assert: текст комментария не находится на странице

    Редактирование описания:
        - do: нажать на иконку с ручкой в поле описания
        - do: ввести текст в поле описания
        - do: сохраниться
        - assert: текст комментария найден на странице

    Дедлайн - дедлайн сегодня отображается в фильтре "Сегодня":
        - do: нажать на иконку календаря
        - do: выставить задаче дедлайн сегодня
        - do: перейти ко всем задачам (со страницы с конкретной задачей)
        - do: открыть фильтр "Сегодня"
        - assert: задача отображается
    
    Дедлайн - дедлайн сегодня отображается в фильтре "Завтра":
        - do: поставить задаче сегодняшний дедлайн
        - do: открыть фильтр "Завтра"
        - assert: задача не отображается

    Дедлайн - дедлайн в будущем через поле в атрибутах:
        - do: нажать на "Дедлайн" в атрибутах
        - do: выставить дедлайн в будущем (1 сентября 2025)
        - assert: дедлайн изменен и отобрадается на странице

    Дедлайн - очистка:
        - do: поставить задаче некий дедлайн
        - do: нажать на дедлайн в карточке задачи
        - do: нажать "Очистить" в открывшемся календаре
        - assert: дедлайн убран
    
    Метка - создать новую:
        - do: нажать на иконку с крестиком "Добавить метку"
        - do: нажать на кнопку "Новая метка"
        - do: заполнить все обязательные поля
        - do: сохраниться
        - assert: новая метка добавлена к задаче

    Метка - убрать метку из задачи:
        - do: добавить метку
        - do: нажать на крестик внутри облачка с меткой
        - assert: метка удалена из задачи

    Метка - добавить уже существующую метку: # не работает клик по метке
        - do: нажать на иконку с крестиком "Добавить метку"
        - do: нажать на метку из списка
        - assert: метка добавлена в задачу

    Подзадачи - создание новой:
        - do: нажать на строку "Связанные" внутри задачи
        - do: ввести заголовок новой задачи в поле
        - do: сохрниться
        - assert: появляется новая задача

    Поздадачи - отображение в родительской:
        - do: создать подзадачу
        - assert: найти связанную задачу по иконке цепи
    
    Поздадачи - ссылка на родительскую:
        - do: создать подзадачу
        - assert: в карточке задачи есть ссылка на родительскую

    Подзадачи - отвязать:
        - do: создать подзадачу
        - do: нажать на цепочку рядом со связанной задачей
        - do: подтвердить действия в алерте
        - assert: на последней задаче нет ссылки на родительскую

    Удалить задачу:
        - do: кликнуть на кнопку "Действия"
        - do: в выпавшем меню выбрать опцию "Удалить"
        - do: подтвердить действие
        - assert: задача больше не отображается на странице

    Аккаунт - добавить аккаунт в задачу:
        - do: нажать на ручку в описании задачи
        - do: нажать на галку Нулевой клиент в открывшемся окне
        - do: Нажать на кнопку Выбрать
        - assert: в задаче появляется ссылка на выбранный аккаунт

    Аккаунт - удалить аккаунт из задачи:
        - do: добавить в задачу аккаунт
        - do: нажать на иконку ведра в описании задачи
        - assert: из задачи изчезает ссылка на выбранный аккаунт

    Наблюдатели - добавить:
        - do: нажать на поле Наблюдатели в атрибутах задачи
        - do: ввести в открывшееся поле имя робота
        - assert: проверить наличие аватарки робота

    Наблюдатели - удалить:
        - do: добавить робота в наблюдатели
        - do: нажать на поле Наблюдатели
        - do: нажать на крестик рядом с облаком робота
        - assert: проверить отсутствие аватарки робота

    Таймер - установить таймер с комментарием:
        - do: нажать на иконку Создать новый таймер в шапке задачи
        - do: ввести робота в поле Уведомить
        - do: ввести текст комментария
        - do: сохранить
        - assert: проверить наличие кнопки Таймеры

    Таймер - установить таймер через 2 дня:
        - do: нажать на иконку Создать новый таймер в шапке задачи
        - do: ввести робота в поле Уведомить
        - do: еажать на кнопку Через 2 дня
        - do: сохранить
        - assert: проверить, что в кнопке с таймером дата + 2 дня от настоящего момента
        
    Таймер - удалить:
        - do: создать таймер
        - do: в атрибутах нажать на поле Таймер
        - do: нажать на красную корзину
        - assert: проверить наличие иконки Установить таймер

    Воркфлоу - изменить:
        - do: нажать на Вокфлоу в атрибутах
        - do: выбрать в выпадашке Стендатрный тикет
        - do: сохраниться
        - assert: проверить появление кнопки В работе



v-team: CRM

files:
  - tests/e2e/test_issue_page.hermione.js
