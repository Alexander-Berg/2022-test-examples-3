#generated by consul-template from /etc/consul-template/tmpl.d/sync-db/direct-test-mysql-grants.ctmpl
---
definitions:
  db_host:
    any:
      - "any"
  instance: 
    any:
      - "any"
  grant:
    direct_everything:
      - SELECT 
      - INSERT 
      - UPDATE 
      - DELETE 
      - CREATE 
      - DROP 
      - REFERENCES 
      - INDEX 
      - ALTER 
      - SHOW DATABASES 
      - SUPER 
      - CREATE TEMPORARY TABLES 
      - LOCK TABLES 
      - REPLICATION CLIENT 
      - REPLICATION SLAVE
      - CREATE VIEW
      - SHOW VIEW
      - CREATE ROUTINE
      - ALTER ROUTINE
      - TRIGGER 
    direct_autotester:
      - SELECT 
      - INSERT 
      - UPDATE 
      - DELETE 
rules:
  - name: autotester
    db_host: set/any
    instance: set/any
    grant: set/direct_autotester
    on: '*.*'
    user: autotester
    client_host: '%'
    # SET old_passwords = 0; select PASSWORD("6f8c114b58f2ce9e");
    password: '*F9A8E96790775D196D12F53BCC88B8048FF62ED5'

  - name: adiuser
    db_host: set/any
    instance: set/any
    grant: set/direct_everything
    on: '*.*'
    user: adiuser
    client_host: '%'
    password: '*61B8CBFAC6E1397C405D8AB745E3262EF58BE8EE'

  - name: direct-test
    db_host: set/any
    instance: set/any
    grant: set/direct_everything
    on: '*.*'
    user: direct-test
    client_host: '%'
    password: '*347676E810584DCD2C05604904D4AD4F3D8892A7'

  # тестовый direct-sql. Не путать с продакшеновым. На продакшене пароль другой.
  - name: superuser
    db_host: set/any
    instance: set/any
    grant: ALL PRIVILEGES
    on: '*.*'
    user: direct-sql
    client_host: '%'
    # SET old_passwords = 0; select PASSWORD("aluminiumminimalimmunitaet");
    password: '*685AF2845F8E6355AA269D85978B8E7A53E8C1C3'

  # старый пользователь, для чтения нужно использовать direct-ro, который приезжает из продакшена
  - name: reader
    db_host: set/any
    instance: set/any
    grant: 
      - SELECT
    on: '*.*'
    user: reader
    client_host: '%'
    # SET old_passwords = 0; select PASSWORD("ztGUlpDM")
    password: '*CA4665A09024322FED25CF45B2E921AA7E6CFF7D'

  - name: rplcat
    db_host: set/any
    instance: set/any
    grant:
      - REPLICATION CLIENT
      - REPLICATION SLAVE
    on: '*.*'
    user: rplcat
    client_host: '%'
    # SET old_passwords = 0; select PASSWORD("ztGUlpDM")
    password: '*43AEB0D5B798CDB3FC32F41ABF5D542600A978F8'
