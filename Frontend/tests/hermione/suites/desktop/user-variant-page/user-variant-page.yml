feature: Страница пользовательских вариантов
description: страница со списком пользовательских вариантов

specs:
    Варианты не созданы:
        beforeEach:
            - do: залогониться
        Переход на страницу:
            - do: открыть страницу личного кабинета "tutor/user/statistics/", добавив в адрес параметр 'passport_uid=user_variant_test_no_variants'
            - assert: |
                открыта страница статистики пользователя
                на странице присутствует блок навигации по страницам "Мои варианты
            - assert: |
                    произошло перенаправление на страницу пользовательских вариантов "tutor/user/variants/"
                    отображена страница пользовательских вариантов
                    список вариантов пуст
            - screenshot: внешний вид пустой страницы пользовательских вариантов [empty-variants]

    Варианты созданы:
        beforeEach:
            - do: залогониться
            - do: перейти на страницу пользовательских вариантов "tutor/user/variants/", добавив в адрес параметр 'passport_uid=user_variant_test'
        Страница пользовательских вариантов:
            - assert: |
                отображена страница пользовательских вариантов
                на странице присутствует список вариантов
            - screenshot: внешний вид блока пользовательских вариантов [plain]
        Кнопка "Добавить вариант":
            - do: кликнуть в кнопку "Добавить вариант"
            - assert: отображен попап добавления пользоватеского варианта
            - screenshot: внешний вид попапа добавления пользовательского варианта [create-variant-popup]
        Проверка ссылки "Пройти вариант":
            - assert: ссылка ведет на "/tutor/subject/variant/?variant_id=3673"
        Версия для печати:
            - do: кликнуть в опциях любого пользовательского варианта в вертикальное троеточие (доп. опции)
            - assert: |
                напротив варианта появился тултип с тремя опциями
                тултип содержит "Версия для печати", "Копировать ссылку", "Удалить"
            - screenshot: внешний вид тултипа с доп. опциями [print-popup]
            - assert: ссылки "Версия для печати" ведет на "/tutor/subject/variant/?print=1&variant_id=3673"
        Проверка ссылки редактирование:
            - assert: ссылки "Редактировать" ведет на "/tutor/user/variants/edit/?variant_id=3673"
        Копирование ссылки:
            - do: кликнуть в опциях любого пользовательского варианта в вертикальное троеточие (доп. опции)
            - do: кликнуть в "Скопировать ссылку"
            - assert: |
                отображена страница пользовательских вариантов
                отображено сообщение "Ссылка скопирована"
        Удаление варианта:
            - do: кликнуть в опциях любого пользовательского варианта в вертикальное троеточие (доп. опции)
            - assert: |
                напротив варианта появился тултип с тремя опциями
                тултип содержит "Версия для печати", "Копировать ссылку", "Удалить"
            - do: кликнуть на тултип "Удалить"
            - assert: в списке варинтов на 1 вариант стало меньше

    Редактирование пользовательского варианта:
        Пустой вариант:
            beforeEach:
                - do: перейти на страницу "/subject/variant?variant_id=3670"
            Внешний вид страницы пустого варианта:
                - screenshot: внешний вид страницы пустого пользовательского варианта [plain]
        Вариант с задачами:
            beforeEach:
                - do: перейти на главную страницу сервиса, добавив в адрес параметр 'passport_uid=user_variant_test'
                - do: кликнуть в "Редактировать" у варианта с кол-вом заданий > 5
            Порядок задач:
                - screenshot: внешний вид блока порядка заданий до перестановки [before]
                - do: поменять местами первое и последнее задание в списке
                - assert: |
                    первая и последняя задачи поменялись местами в карточке порядка заданий
                    первая и последняя задачи поменялись местами в списке задач варианта
                    нумерация заданий перестроилась и по-прежнему последовательна от 1 до N
                - screenshot: внешний вид страницы блока порядка заданий после перестановки [after]
            Добавить задание [manual]:
                - automation: YOUNGLINGS-2847
                - tags: not_automated
                - do: кликнуть в кнопку "Добавить задание" в карточке порядка заданий
                - assert: произошло перенаправление на страницу предмета аналогичного с предметом задания
            Удаление задания [manual]:
                - automation: YOUNGLINGS-2847
                - tags: not_automated
                - do: кликнуть в кнопку удаления задания в любой карточке задачи
                - assert: |
                    задание удалено из списка задач варианта
                    задание удалено из списка в карточке порядка заданий
                    нумерация заданий в списке задач варианта по-прежнему последовательна от 1 до N
                    нумерация заданий в списке задач в карточке порядка заданий по-прежнему последовательна от 1 до N
                    появился попап удаления задачи
                - screenshot: внешний вид попапа удаления задачи [plain]
            Версия для печати [manual]:
                - automation: YOUNGLINGS-2847
                - tags: not_automated
                - do: кликнуть в кнопку "Версия для печати"
                - assert: отображена страница печати пользовательского варианта
            Редактирование [manual]:
                - automation: YOUNGLINGS-2847
                - tags: not_automated
                - do: кликнуть в кнопку редактирования пользовательского варианта
                - assert: появился попап редактирования варианта
            Ссылка для копирования [manual]:
                - automation: YOUNGLINGS-2847
                - tags: not_automated
                - do: кликнуть в кнопку ссылки для копирования
                - assert: появилось сообщение "Ссылка скопирована"
                - screenshot: внешний вид страницы пользовательского варианта [plain]
    Добавление варианта без логина c параметром integration=mes:
        - do: разлогиниться в яндексе или зайти в режиме инкогнито
        - do: открыть страницу личного кабинета "tutor/user/variants/", добавив в адрес параметры 'passport_uid=user_variant_test_no_variants' и 'integration=mes'
        - assert: открыта страница с вариантами пользователя
        - do: на странице присутствует кнопка "Добавить вариант"
        - do: кликнуть в кнопку "Добавить вариант"
        - assert: отображен попап добавления пользоватеского варианта
        - screenshot: внешний вид попапа добавления пользовательского варианта [create-variant-popup]

v-team: Younglings

qa-engineer:
    - helm

platform:
    - common

tags:
    - edu-front
    - user-variant-page

files:
    - tests/hermione/suites/desktop/user-variant-page/user-variant-page.hermione.js
