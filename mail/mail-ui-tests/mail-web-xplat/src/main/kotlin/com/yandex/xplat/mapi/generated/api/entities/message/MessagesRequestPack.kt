// <<< AUTOGENERATED BY YANDEX.SCRIPT FROM api/entities/message/messages-request-pack.ts >>>

package com.yandex.xplat.mapi

import com.yandex.xplat.common.*

public open class MessagesRequestPack(val requests: YSArray<MessageRequestItem>, val withAttachments: Boolean, val withTabs: Boolean = false): MailNetworkRequest() {
    open override fun version(): NetworkAPIVersions {
        return NetworkAPIVersions.v1
    }

    open override fun method(): NetworkMethod {
        return NetworkMethod.post
    }

    open override fun path(): String {
        return "messages"
    }

    open override fun encoding(): RequestEncoding {
        return JsonRequestEncoding()
    }

    open override fun params(): NetworkParams {
        return MapJSONItem().put("requests", ArrayJSONItem(this.requests.map( {
            item ->
            item.params()
        })))
    }

    open override fun urlExtra(): MapJSONItem {
        val parent = super.urlExtra()
        if (this.withAttachments) {
            parent.putInt32(SearchRequest.REQUEST_DISK_ATTACHES_QUERY_PARAM, 1)
        }
        if (this.withTabs) {
            parent.putString("withTabs", "1")
        }
        return parent
    }

}

