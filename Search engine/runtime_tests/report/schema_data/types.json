{
    "reqdata": {
        "additionalProperties": false,
        "required": ["__is_plain", "action_key", "clid", "cookie", "deajaxed_url", "device",
            "device_detect", "environment", "etext", "experiments", "filter", "filter_is_forced",
            "flags", "fuid_is_bad", "headers", "hostname", "http_host", "http_proto", "http_referer", "is_dev",
            "is_trusted_net", "is_yandex_net", "language", "morda_url", "numdoc", "output_encoding", "passport", "path",
            "prefs", "project", "proto", "reqid", "ruid", "ruip", "special_prefs", "suggest", "time",
            "tld", "ua", "ua_is_ie", "unparsed_uri", "url", "user_country", "user_region",
            "user_region_is_manual", "user_region_no_lr", "user_region_real", "user_selected_region",
            "user_time", "uuid", "wizard_text", "ycookie"],
        "type": "object",
        "properties": {
            "ycookie": {
                "additionalProperties": false,
                "required": ["__is_plain", "gp", "gpauto", "yp", "ys", "yt", "yc"],
                "type": "object",
                "properties": {
                    "gp": {
                        "type": "null"
                    },
                    "gpauto": {
                        "type": ["null", "object"],
                        "additionalProperties": false,
                        "properties": {
                            "latitude": { "type": "string", "pattern": "^[0-9]+\\.[0-9]+$" },
                            "longitude": { "type": "string", "pattern": "^[0-9]+\\.[0-9]+$" },
                            "method": { "type": "string", "minLength": 1 },
                            "precision": { "type": "string", "minLength": 1 },
                            "timestamp": { "type": "string", "minLength": 8 }
                        }
                    },
                    "__is_plain": {
                        "type": "integer",
                        "enum": [1]
                    },
                    "yc": {
                        "type": "object",
                        "properties": {}
                    },
                    "yp": {
                        "type": "object",
                        "properties": {}
                    },
                    "ys": {
                        "type": "object",
                        "properties": {}
                    },
                    "__package": {
                        "type": "string",
                        "pattern": "^YxWeb::"
                    },
                    "yt": {
                        "type": ["object", "null"]
                    }
                }
            },
            "special_prefs": {
                "required": ["view_relevance"],
                "type": "object",
                "properties": {
                    "test_mode": {
                        "type": "integer"
                    },
                    "f:all_sitelinks": {
                        "type": "integer"
                    },
                    "long_request": {
                        "type": "integer"
                    },
                    "f:full_sitelinks": {
                        "type": "integer"
                    },
                    "no_guinea_pig": {
                        "type": "integer"
                    },
                    "noredirect": {
                        "type": "integer"
                    },
                    "hltd_framing_envelope": {
                        "type": "integer"
                    },
                    "view_search_hosts": {
                        "type": "integer"
                    },
                    "fire_mode": {
                        "type": "integer"
                    },
                    "force_test_id": {
                        "items": [
                            {
                                "type": "string"
                            }
                        ],
                        "type": "array"
                    },
                    "no_banners": {
                        "type": "integer"
                    },
                    "debug_wizard": {
                        "type": "integer"
                    },
                    "no_infected": {
                        "type": "integer"
                    },
                    "f:web4_dev": {
                        "type": "integer"
                    },
                    "i_m_a_hacker": {
                        "type": "integer"
                    },
                    "show_stuff": {
                        "type": "integer"
                    },
                    "view_relevance": {
                        "type": ["integer", "boolean"]
                    }
                }
            },
            "http_proto": {
                "type": "string"
            },
            "reqid": {
                "type": "string"
            },
            "experiments": {
                "required": ["__is_plain", "active", "contexts", "environment",
                    "ids", "is_contex_split", "slots", "source",
                    "source_names"],
                "type": "object",
                "properties": {
                    "environment": {
                        "type": "string",
                        "enum": ["US", "US: pre"]
                    },
                    "contexts": {
                        "type": ["null", "object"],
                        "properties": {
                            "MAIN": {
                                "type": "object",
                                "properties": {}
                            },
                            "A": {
                                "type": "object",
                                "properties": {}
                            },
                            "B": {
                                "type": "object",
                                "properties": {}
                            }
                        }
                    },
                    "ids": {
                        "items": [
                            {
                                "type": "string"
                            }
                        ],
                        "type": "array"
                    },
                    "source": {
                        "type": "object",
                        "properties": {
                            "text": {
                                "type": "object",
                                "properties": {}
                            },
                            "relev": {
                                "type": "object",
                                "properties": {}
                            },
                            "qtree": {
                                "type": "object",
                                "properties": {}
                            },
                            "pron": {
                                "type": "object",
                                "properties": {}
                            },
                            "wizard-rules": {
                                "type": "object",
                                "properties": {}
                            },
                            "rearr": {
                                "type": "object",
                                "properties": {}
                            },
                            "query-markup": {
                                "type": "object",
                                "properties": {}
                            }
                        }
                    },
                    "source_names": {
                        "type": "object",
                        "properties": {}
                    },
                    "version": {
                        "type": ["null", "integer"]
                    },
                    "is_contex_split": {
                        "type": ["null", "integer"]
                    },
                    "active": {
                        "type": "integer",
                        "enum": [0, 1]
                    },
                    "__is_plain": {
                        "type": "integer",
                        "enum": [1]
                    },
                    "slots": {
                        "items": [
                            {
                                "items": [{ "type": "string", "pattern": "^[0-9]+" }],
                                "type": "array"
                            }
                        ],
                        "type": "array"
                    },
                    "__package": {
                        "type": "string",
                        "pattern": "^YxWeb::"
                    },
                    "wizard_contexts": {
                        "type": ["null","object"]
                    }
                }
            },
            "path": {
                "type": "string"
            },
            "__package": {
                "type": "string",
                "pattern": "^YxWeb::"
            },
            "numdoc": {
                "type": "integer",
                "enum": [1, 10, 15, 20, 30, 40, 50]
            },
            "unparsed_uri": {
                "type": "string"
            },
            "ruid": {
                "type": "string"
            },
            "filter": {
                "type": "integer"
            },
            "uuid": {
                "type": "null"
            },
            "http_referer": {
                "type": "null"
            },
            "proto": {
                "type": "object",
                "properties": {}
            },
            "suggest": {
                "type": "integer"
            },
            "headers": {
                "type": "object"
            },
            "hostname": {
                "type": "string"
            },
            "etext": {
                "type": "string"
            },
            "environment": {
                "type": "string"
            },
            "action_key": {
                "type": "string"
            },
            "ruip": {
                "type": "string"
            },
            "passport": {
                "additionalProperties": false,
                "required": ["__is_plain", "cookieL", "environment", "id", "logged_in", "login", "session_id", "session_status"],
                "type": "object",
                "properties": {
                    "cookieL": {
                        "type": ["null", "object"],
                        "required": ["login"],
                        "properties": {
                            "login": {
                                "type": ["string", "null"]
                            }
                        }
                    },
                    "session_status": {
                        "type": "integer"
                    },
                    "session_id": {
                        "type": "string"
                    },
                    "environment": {
                        "type": "string"
                    },
                    "__is_plain": {
                        "type": "integer",
                        "enum": [1]
                    },
                    "logged_in": {
                        "type": "number"
                    },
                    "login": {
                        "type": "string"
                    },
                    "__package": {
                        "type": "string",
                        "pattern": "^YxWeb::"
                    },
                    "id": {
                        "type": "string"
                    }
                }
            },
            "morda_url": {
                "type": "string"
            },
            "prefs": {
                "required": ["afamily", "aflt", "ajx", "altsearch", "banners", "desc", "family", "favicons", "imgbg",
                    "kbd", "lang", "noreask", "numdoc", "person", "pubexp",
                    "shsd", "ssspeed", "target", "ton", "tose", "video_hide_favorites",
                    "video_hide_history", "video_hide_recommended", "vna"],
                "type": "object",
                "properties": {
                    "family": {
                        "type": "integer"
                    },
                    "ssspeed": {
                        "type": "integer"
                    },
                    "kbd": {
                        "type": "integer"
                    },
                    "noreask": {
                        "type": "integer"
                    },
                    "imgsnp": {
                        "type": "null"
                    },
                    "numdoc": {
                        "type": "integer",
                        "enum": [1, 10, 15, 20, 30, 40, 50]
                    },
                    "tose": {
                        "type": "integer"
                    },
                    "ajx": {
                        "type": "integer"
                    },
                    "video_hide_history": {
                        "type": "integer"
                    },
                    "video_hide_favorites": {
                        "type": "integer"
                    },
                    "is_family": {
                        "type": "integer"
                    },
                    "ton": {
                        "type": "integer"
                    },
                    "shsd": {
                        "type": "integer"
                    },
                    "imgbg": {
                        "type": "string"
                    },
                    "vna": {
                        "type": "integer"
                    },
                    "pubexp": {
                        "type": "string"
                    },
                    "afamily": {
                        "type": ["string", "integer"],
                        "$comment": "TODO FIXME"
                    },
                    "imgflt": {
                        "type": "integer"
                    },
                    "aflt": {
                        "type": "integer"
                    },
                    "desc": {
                        "type": "string"
                    },
                    "lang": {
                        "items": [
                            {
                                "type": "string"
                            }
                        ],
                        "type": "array"
                    },
                    "favicons": {
                        "type": "integer"
                    },
                    "target": {
                        "type": "string"
                    },
                    "altsearch": {
                        "type": "integer"
                    },
                    "video_hide_recommended": {
                        "type": "integer"
                    },
                    "person": {
                        "type": "integer"
                    },
                    "t": {
                        "type": "null"
                    },
                    "banners": {
                        "type": "integer"
                    }
                }
            },
            "is_trusted_net": {
                "type": "integer",
                "enum": [0, 1]
            },
            "is_yandex_net": {
                "type": "integer",
                "enum": [0, 1]
            },
            "fuid_is_bad": {
                "type": "null"
            },
            "time": { "allOf": [{"$ref": "core.json#time"}, {"required": ["to_iso"]}] },
            "user_time": { "allOf": [{"$ref": "core.json#time"}, {"required": ["to_iso"]}] },
            "cookie": {
                "type": "object"
            },
            "device_detect": {
                "additionalProperties": false,
                "required": ["BitsPerPixel", "BrowserBase", "BrowserBaseVersion", "BrowserEngine",
                    "BrowserEngineVersion", "BrowserEngineVersionRaw", "BrowserName",
                    "BrowserShell", "BrowserShellVersion", "BrowserVersion",
                    "BrowserVersionRaw", "DesktopMode", "DeviceId", "DeviceKeyboard",
                    "DeviceModel", "DeviceName", "DeviceVendor", "GoogleToolBar",
                    "GoogleToolBarVersion", "J2ME", "MailRuAgent", "MailRuAgentVersion",
                    "MailRuSputnik", "MailRuSputnikVersion", "MultiTouch", "OSFamily",
                    "OSName", "OSVersion", "OSVersionRaw", "PreferMobile", "ScreenHeight",
                    "ScreenSize", "ScreenWidth", "YaGUI", "YandexBar", "YandexBarVersion",
                    "__is_plain", "device", "error", "hasFlash", "hasHTML5",
                    "historySupport", "inAppBrowser", "isBeta", "isBrowser", "isEmulator",
                    "isMobile", "isRobot", "isTV", "isTablet", "isTouch", "isWAP", "x64", "YaBuildName", "isSameSiteSupported"],
                "type": "object",
                "properties": {
                    "BrowserShellVersion": {
                        "type": "string"
                    },
                    "BrowserVersion": {
                        "type": "string"
                    },
                    "YandexBar": {
                        "type": "integer"
                    },
                    "BitsPerPixel": {
                        "type": "integer"
                    },
                    "isTablet": {
                        "type": "integer"
                    },
                    "ScreenHeight": {
                        "type": "integer"
                    },
                    "ScreenSize": {
                        "type": "string"
                    },
                    "BrowserEngineVersionRaw": {
                        "type": "string"
                    },
                    "J2ME": {
                        "type": "integer"
                    },
                    "DeviceKeyboard": {
                        "type": "string"
                    },
                    "OSVersionRaw": {
                        "type": "string"
                    },
                    "BrowserShell": {
                        "type": "string"
                    },
                    "DeviceName": {
                        "type": "string"
                    },
                    "__package": {
                        "type": "string",
                        "pattern": "^YxWeb::"
                    },
                    "BrowserBaseVersion": {
                        "type": "string"
                    },
                    "x64": {
                        "type": "integer"
                    },
                    "YandexBarVersion": {
                        "type": "string"
                    },
                    "BrowserVersionRaw": {
                        "type": "string"
                    },
                    "isTouch": {
                        "type": "integer"
                    },
                    "isTV": {
                        "type": "integer"
                    },
                    "ScreenWidth": {
                        "type": "integer"
                    },
                    "isMobile": {
                        "type": "integer"
                    },
                    "MailRuAgentVersion": {
                        "type": "string"
                    },
                    "hasHTML5": {
                        "type": "integer"
                    },
                    "inAppBrowser": {
                        "type": "integer"
                    },
                    "MailRuAgent": {
                        "type": "integer"
                    },
                    "BrowserEngine": {
                        "type": "string"
                    },
                    "BrowserBase": {
                        "type": "string"
                    },
                    "BrowserEngineVersion": {
                        "type": "string"
                    },
                    "DeviceModel": {
                        "type": "string"
                    },
                    "isRobot": {
                        "type": "integer"
                    },
                    "isBrowser": {
                        "type": "integer"
                    },
                    "DeviceVendor": {
                        "type": "string"
                    },
                    "DesktopMode": {
                        "type": "integer"
                    },
                    "device": {
                        "type": "string"
                    },
                    "__is_plain": {
                        "type": "integer",
                        "enum": [1]
                    },
                    "OSVersion": {
                        "type": "string"
                    },
                    "isEmulator": {
                        "type": "integer"
                    },
                    "OSFamily": {
                        "type": "string"
                    },
                    "isWAP": {
                        "type": "integer"
                    },
                    "MultiTouch": {
                        "type": "integer"
                    },
                    "GoogleToolBarVersion": {
                        "type": "string"
                    },
                    "historySupport": {
                        "type": "integer"
                    },
                    "PreferMobile": {
                        "type": "integer"
                    },
                    "OSName": {
                        "type": "string"
                    },
                    "MailRuSputnikVersion": {
                        "type": "string"
                    },
                    "BrowserName": {
                        "type": "string"
                    },
                    "DeviceId": {
                        "type": "string"
                    },
                    "YaGUI": {
                        "type": "string"
                    },
                    "error": {
                        "type": "string"
                    },
                    "isBeta": {
                        "type": "integer"
                    },
                    "MailRuSputnik": {
                        "type": "integer"
                    },
                    "GoogleToolBar": {
                        "type": "integer"
                    },
                    "hasFlash": {
                        "type": "integer"
                    },
                    "YaBuildName": {
                        "type": "string"
                    },
                    "isSameSiteSupported": {
                        "type": ["integer", "null"]
                    }
                }
            },
            "device": {
                "type": "string"
            },
            "__is_plain": {
                "type": "integer",
                "enum": [1]
            },
            "filter_is_forced": {
                "type": ["integer", "boolean"]
            },
            "deajaxed_url": {
                "type": "string"
            },
            "wizard_text": {
                "type": "string"
            },
            "output_encoding": {
                "type": "string"
            },
            "language": {
                "type": "string",
                "minLength" : 2,
                "maxLength" : 2
            },
            "url": {
                "type": "string"
            },
            "is_dev": {
                "type": ["string", "integer"],
                "$comment": "TODO FIXME"
            },
            "project": {
                "type": "string"
            },
            "flags": {
                "type": "object"
            },
            "user_region": { "$ref": "core.json#region" },
            "user_country": { "$ref": "core.json#region" },
            "user_region_real": { "$ref": "core.json#region" },
            "user_region_no_lr": { "$ref": "core.json#region" },
            "user_selected_region": { "$ref": "core.json#region" },
            "user_region_is_manual": {
                "type": "integer"
            },
            "tld": {
                "type": "string"
            },
            "http_host": {
                "type": "string"
            },
            "ua_is_ie": {
                "type": "integer"
            },
            "ua": {
                "type": "string"
            },
            "clid": {
                "type": "string"
            },
            "replaced_laas_headers": {
                "type": ["object", "null"]
            }
        }
    },
    "download_saved_copy_url": {
        "oneOf": [
            {"type": "null"},
            {
                "type": "object",
                "allOf": [
                    { "$ref": "core.json#cgi" },
                    {
                        "oneOf": [
                            { "$ref": "#saved_copy_url_hltd" },
                            { "$ref": "#saved_copy_url_yandexwebcache" }
                        ]
                    },
                    {
                        "type": "object",
                        "properties": {
                            "data": {
                                "type": "object",
                                "properties": {
                                    "args": {
                                        "required": ["noconv"],
                                        "type": "object",
                                        "properties": {
                                            "noconv": {
                                                "type": "array",
                                                "minItems": 1,
                                                "maxItems": 1,
                                                "items": {
                                                    "type": "integer",
                                                    "enum": [1]
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                ]
            }
        ]
    },
    "saved_copy_url": {
        "oneOf": [
            {"type": "null"},
            {
                "type": "object",
                "allOf": [
                    { "$ref": "core.json#cgi" },
                    {
                        "oneOf": [
                            { "$ref": "#saved_copy_url_hltd" },
                            { "$ref": "#saved_copy_url_docviewer" },
                            { "$ref": "#saved_copy_url_yandexwebcache" }
                        ]
                    }
                ]
            }
        ]
    },
    "saved_copy_url_hltd": {
        "type": "object",
        "properties": {
            "data": {
                "type": "object",
                "properties": {
                    "scheme": {
                        "type": "string",
                        "enum": ["http", "https"]
                    },
                    "hostname": {
                        "type": "string",
                        "enum": ["hghltd.yandex.net"]
                    },
                    "path": {
                        "type": "string",
                        "enum": ["yandbtm"]
                    },
                    "args": {
                        "required": ["fmode", "l10n", "la", "text", "tld", "tm", "url"],
                        "additionalProperties": false,
                        "type": "object",
                        "properties": {
                            "dsn": {
                                "items": [
                                    {
                                        "type": "string"
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "d":   { "$comment": "Non-report. this shit could arrive as raw cgi from $doc->{saveddoc_id} right after dsn=" },
                            "sh":  { "$comment": "Non-report. this shit could arrive as raw cgi from $doc->{saveddoc_id} right after dsn=" },

                            "noconv": {
                                "type": "array",
                                "minItems": 1,
                                "maxItems": 1,
                                "items": {
                                    "type": "integer",
                                    "enum": [1]
                                }
                            },
                            "isu": {
                                "items": [
                                    {
                                        "type": "integer",
                                        "enum": [1]
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "sg": {
                                "items": [
                                    {
                                        "type": "string"
                                    }
                                ],
                                "type": "array"
                            },
                            "type": {
                                "items": [
                                    {
                                        "type": "string",
                                        "enum": ["touch"]
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "src": {
                                "items": [
                                    {
                                        "type": "string",
                                        "enum": ["FT", "F"]
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "lang": {
                                "items": [
                                    {
                                        "type": "string",
                                        "minLength": 2
                                    }
                                ],
                                "maxItems": 1,
                                "type": "array"
                            },
                            "la": {
                                "items": {
                                    "oneOf": [
                                        {
                                            "type": "number"
                                        },
                                        {
                                            "type": "string",
                                            "enum": [""]
                                        }
                                    ]
                                },
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "url": {
                                "items": [
                                    {
                                        "type": "string",
                                        "pattern": "^(https?:)?//."
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "text": {
                                "items": [
                                    {
                                        "type": "string"
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "l10n": {
                                "items": [
                                    {
                                        "type": "string",
                                        "minLength": 2
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "mime": {
                                "items": [
                                    {
                                        "type": "string",
                                        "minLength": 1
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "myname": {
                                "items": [
                                    {
                                        "type": "string",
                                        "minLength": 1
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "tm": {
                                "items": [
                                    {
                                        "type": "integer",
                                        "minimum": 1000000
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "fmode": {
                                "items": [
                                    {
                                        "type": "string",
                                        "enum": ["inject"]
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "tld": {
                                "items": [
                                    {
                                        "type": "string",
                                        "minLength": 2
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            }
                        }
                    }
                }
            }
        }
    },
    "saved_copy_url_yandexwebcache": {
        "type": "object",
        "properties": {
            "__is_plain": {
                "type": "integer"
            },
            "data": {
                "type": "object",
                "properties": {
                    "text": {
                        "type": "string"
                    },
                    "files": {
                        "type": "object"
                    },
                    "order": {
                        "type": "array"
                    },
                    "raw_text": {
                        "type": ["null"]
                    },
                    "rawdata": {
                        "type": ["null"]
                    },
                    "scheme": {
                        "type": "string",
                        "enum": ["http", "https"]
                    },
                    "hostname": {
                        "type": "string",
                        "enum": ["yandexwebcache.net"]
                    },
                    "path": {
                        "type": "string",
                        "enum": ["yandbtm"]
                    },
                    "args": {
                        "type": "object",
                        "required": ["fmode", "l10n", "la", "text", "tld", "tm", "url"],
                        "additionalProperties": false,
                        "properties": {
                            "fmode": {
                                "type": "array",
                                "items": [
                                    {
                                        "type": "string",
                                        "enum": ["inject"]
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1
                            },
                            "l10n": {
                                "items": [
                                    {
                                        "type": "string",
                                        "minLength": 2
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "la": {
                                "type": "array",
                                "items": {
                                    "oneOf": [
                                        {
                                            "type": "number"
                                        },
                                        {
                                            "type": "string",
                                            "enum": [""]
                                        }
                                    ]
                                },
                                "minItems": 1,
                                "maxItems": 1
                            },
                            "text": {
                                "items": [
                                    {
                                        "type": "string",
                                        "minLength": 1
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "tld": {
                                "items": [
                                    {
                                        "type": "string",
                                        "minLength": 2
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "tm": {
                                "items": [
                                    {
                                        "type": "integer",
                                        "minimum": 1000000
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "url": {
                                "items": [
                                    {
                                        "type": "string",
                                        "pattern": "^(https?:)?//."
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "mime": {
                                "items": [
                                    {
                                        "type": "string",
                                        "minLength": 1
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "lang": {
                                "items": [
                                    {
                                        "type": "string",
                                        "minLength": 2
                                    }
                                ],
                                "maxItems": 1,
                                "type": "array"
                            },
                            "dsn": {
                                "items": [
                                    {
                                        "type": "string"
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "d":   { "$comment": "Non-report. this shit could arrive as raw cgi from $doc->{saveddoc_id} right after dsn=" },
                            "sh":  { "$comment": "Non-report. this shit could arrive as raw cgi from $doc->{saveddoc_id} right after dsn=" },

                            "noconv": {
                                "type": "array",
                                "minItems": 1,
                                "maxItems": 1,
                                "items": {
                                    "type": "integer",
                                    "enum": [1]
                                }
                            },
                            "isu": {
                                "items": [
                                    {
                                        "type": "integer",
                                        "enum": [1]
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "sg": {
                                "items": [
                                    {
                                        "type": "string"
                                    }
                                ],
                                "type": "array"
                            },
                            "type": {
                                "items": [
                                    {
                                        "type": "string",
                                        "enum": ["touch"]
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "src": {
                                "items": [
                                    {
                                        "type": "string",
                                        "enum": ["FT", "F"]
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "myname": {
                                "items": [
                                    {
                                        "type": "string",
                                        "minLength": 1
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            }
                        }
                    }
                }
            }
        }
    },
    "saved_copy_url_docviewer": {
        "type": "object",
        "properties": {
            "__is_plain": {
                "type": "integer"
            },
            "data": {
                "type": "object",
                "properties": {
                    "text": {
                        "type": "string"
                    },
                    "files": {
                        "type": "object"
                    },
                    "order": {
                        "type": "array"
                    },
                    "raw_text": {
                        "type": ["null"]
                    },
                    "rawdata": {
                        "type": ["null"]
                    },
                    "scheme": {
                        "type": "string",
                        "enum": ["https"]
                    },
                    "hostname": {
                        "type": "string",
                        "pattern": "^docviewer\\.yandex\\."
                    },
                    "path": {
                        "type": "string",
                        "enum": ["/"]
                    },
                    "args": {
                        "required": ["url", "lr", "tld", "tm"],
                        "additionalProperties": false,
                        "type": "object",
                        "properties": {
                            "type": {
                                "items": [
                                    {
                                        "type": "string",
                                        "enum": ["touch"]
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "lr": {
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "lang": {
                                "items": [
                                    {
                                        "type": "string",
                                        "minLength": 2
                                    }
                                ],
                                "minItems": 0,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "url": {
                                "items": [
                                    {
                                        "type": "string",
                                        "pattern": "^(https?:)?//."
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "text": {
                                "items": [
                                    {
                                        "type": "string",
                                        "minLength": 1
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "l10n": {
                                "items": [
                                    {
                                        "type": "string",
                                        "minLength": 2
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "mime": {
                                "items": [
                                    {
                                        "type": "string",
                                        "minLength": 1
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "name": {
                                "items": [
                                    {
                                        "type": "string",
                                        "minLength": 1
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "tm": {
                                "items": [
                                    {
                                        "type": "integer",
                                        "minimum": 1000000
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            },
                            "tld": {
                                "items": [
                                    {
                                        "type": "string",
                                        "minLength": 2
                                    }
                                ],
                                "minItems": 1,
                                "maxItems": 1,
                                "type": "array"
                            }
                        }
                    }
                }
            }
        }
    },
    "reask": {
        "required": ["__is_plain", "enabled", "force", "immediately", "orig_doc_count",
            "raw_source_text", "rule", "show_message", "text"],
        "type": "object",
        "properties": {
            "force": {
                "type": "null"
            },
            "orig_doc_count": {
                "type": "integer"
            },
            "text": {
                "type": ["null", "string"]
            },
            "enabled": {
                "type": "integer"
            },
            "rule": {
                "type": ["null", "string"]
            },
            "show_message": {
                "type": "integer"
            },
            "raw_source_text": {
                "type": ["null", "string"]
            },
            "immediately": {
                "type": "null"
            },
            "__is_plain": {
                "type": "integer",
                "enum": [1]
            },
            "__package": {
                "type": "string",
                "pattern": "^YxWeb::"
            }
        }
    },
    "doc_common": {
        "required": ["server_descr", "snippets"],
        "type": "object",
        "properties": {
            "_markers": {
                "type": "array"
            },
            "doctitle": {
                "type": "string"
            },
            "favicon_domain": {
                "type": "string"
            },
            "nav_level": {
                "type": "string"
            },
            "green_url": {
                "type": "string"
            },
            "host": {
                "type": "string"
            },
            "is_recent": {
                "type": ["integer", "string"]
            },
            "markers": {
                "type": "object"
            },
            "mime": {
                "type": "string"
            },
            "num": {
                "type": "string",
                "pattern": "^[0-9]+$"
            },
            "saved_copy_url": { "$ref": "#saved_copy_url" },
            "download_saved_copy_url": { "$ref": "#download_saved_copy_url" },
            "server_descr": {
                "type": "string",
                "pattern": "^[A-Z][A-Z0-9_]+$"
            },
            "size": {
                "type": "integer"
            },
            "snippets": {
                "type": "object"
            },
            "supplementary": {
                "type": "object"
            },
            "url": {
                "type": "string"
            },
            "url_parts": { "$ref": "core.json#url" }
        }
    }
}
