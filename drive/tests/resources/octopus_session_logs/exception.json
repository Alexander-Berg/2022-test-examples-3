[
  {
    "action_args": {
      "requester_telnum": "+71234567890",
      "responder_telnum": null
    },
    "id": "09329e86-82d5-4615-ae90-2d8e46d37fe4",
    "dt": 1511633878.5309615,
    "action_id": 1,
    "action_type": "SESSION_START",
    "loglevel": 2,
    "call_handling_type": 6,
    "session_id": "7882276c-13ad-421b-abfe-bf1c36105b11",
    "step_name": null,
    "project_name": "CARS",
    "session_type": "CarsharingCheck",
    "phase_num": 0,
    "agent_id": null
  },
  {
    "action_args": {
      "requester_telnum": "+71234567890"
    },
    "id": "aa85b238-b318-4e8c-826f-ee7bbfd1f3b0",
    "dt": 1511633878.6122417,
    "action_id": 34,
    "action_type": "PHASE_START",
    "loglevel": 2,
    "call_handling_type": 6,
    "session_id": "7882276c-13ad-421b-abfe-bf1c36105b11",
    "step_name": null,
    "project_name": "CARS",
    "session_type": "CarsharingCheck",
    "phase_num": 1,
    "agent_id": null
  },
  {
    "action_args": {
      "leg_id": "7882276c-13ad-421b-abfe-bf1c36105b11"
    },
    "action_result": "OK",
    "action_result_cause": "initiator_park",
    "id": "03a0ca5e-df76-4672-89d1-cb9acbe310ef",
    "dt": 1511633895.353457,
    "action_id": 31,
    "action_type": "ORIGINATE",
    "loglevel": 2,
    "call_handling_type": 6,
    "session_id": "7882276c-13ad-421b-abfe-bf1c36105b11",
    "step_name": "start",
    "project_name": "CARS",
    "session_type": "CarsharingCheck",
    "phase_num": 1,
    "agent_id": null
  },
  {
    "action_args": {
      "result": "ERROR",
      "wait_duration": 0,
      "call_duration": 0,
      "reason": 8,
      "language": {
        "ru": 1
      }
    },
    "id": "4df75366-644f-4871-902b-8070590edf72",
    "dt": 1511633895.3546972,
    "action_id": 35,
    "action_type": "PHASE_END",
    "loglevel": 2,
    "call_handling_type": 6,
    "session_id": "7882276c-13ad-421b-abfe-bf1c36105b11",
    "step_name": "ask_phrase",
    "project_name": "CARS",
    "session_type": "CarsharingCheck",
    "phase_num": 1,
    "agent_id": null
  },
  {
    "action_args": {
      "reason": 4
    },
    "recordings": {
      "1": {
        "start": 1511633895.3532405,
        "name": "/opt/octopus/spool/recordings/7882276c-13ad-421b-abfe-bf1c36105b11_phase_1_both.wav",
        "direction": "both",
        "bucket": "taxiout-test",
        "session_type": "CarsharingCheck",
        "session_unit": "CARS",
        "stop": 1511633895.361537
      }
    },
    "id": "03a965f1-4189-43e1-97ef-d5ffd1b113cb",
    "dt": 1511633895.409398,
    "action_id": 24,
    "action_type": "SESSION_END",
    "loglevel": 2,
    "call_handling_type": 6,
    "session_id": "7882276c-13ad-421b-abfe-bf1c36105b11",
    "step_name": "session_end",
    "project_name": "CARS",
    "session_type": "CarsharingCheck",
    "phase_num": 1,
    "agent_id": null
  },
  {
    "action_args": {
      "state": {
        "variables": {
          "call_handling_type": 6,
          "record_session": true,
          "skills": {
            "language": {
              "ru": 1
            }
          },
          "session_type": "CarsharingCheck",
          "calling_number": "+71234567890",
          "calling_name": "Checker",
          "session_project": "CARS",
          "fs_call_id": "7882276c-13ad-421b-abfe-bf1c36105b11",
          "session_id": "7882276c-13ad-421b-abfe-bf1c36105b11",
          "legs": {
            "initiator": null
          },
          "legs_stat": {
            "7882276c-13ad-421b-abfe-bf1c36105b11": {
              "id": "7882276c-13ad-421b-abfe-bf1c36105b11",
              "role": "initiator",
              "state": "DISCONNECTED",
              "end_reason": "SESSION_DISCONNECT",
              "call_stat": {
                "hangup_cause": "NORMAL_CLEARING",
                "hangup_q850": "16",
                "hangup_disposition": "send_bye",
                "rtp_stat": null,
                "rtp_audio_in_raw_bytes": "40936",
                "rtp_audio_in_media_bytes": "172",
                "rtp_audio_in_packet_count": "238",
                "rtp_audio_in_media_packet_count": "1",
                "rtp_audio_in_skip_packet_count": "3",
                "rtp_audio_in_jitter_packet_count": "0",
                "rtp_audio_in_dtmf_packet_count": "0",
                "rtp_audio_in_cng_packet_count": "0",
                "rtp_audio_in_flush_packet_count": "237",
                "rtp_audio_in_largest_jb_size": "0",
                "rtp_audio_in_jitter_min_variance": "0.00",
                "rtp_audio_in_jitter_max_variance": "0.00",
                "rtp_audio_in_jitter_loss_rate": "0.00",
                "rtp_audio_in_jitter_burst_rate": "0.00",
                "rtp_audio_in_mean_interval": "0.00",
                "rtp_audio_in_flaw_total": "0",
                "rtp_audio_in_quality_percentage": "100.00",
                "rtp_audio_in_mos": "4.50",
                "rtp_audio_out_raw_bytes": "0",
                "rtp_audio_out_media_bytes": "0",
                "rtp_audio_out_packet_count": "0",
                "rtp_audio_out_media_packet_count": "0",
                "rtp_audio_out_skip_packet_count": "0",
                "rtp_audio_out_dtmf_packet_count": "0",
                "rtp_audio_out_cng_packet_count": "0",
                "rtp_audio_rtcp_packet_count": "0",
                "rtp_audio_rtcp_octet_count": "0"
              },
              "is_on_hold": false,
              "is_lingering": false
            }
          },
          "called_number": "+71234567890",
          "_session_end_reason_verbose_": "FORCED_SESSION_EXCEPTION",
          "_session_end_reason_": 4,
          "recordings": {
            "1": {
              "start": 1511633895.3532405,
              "name": "/opt/octopus/spool/recordings/7882276c-13ad-421b-abfe-bf1c36105b11_phase_1_both.wav",
              "direction": "both",
              "bucket": "taxiout-test",
              "session_type": "CarsharingCheck",
              "session_unit": "CARS",
              "stop": 1511633895.361537
            }
          }
        },
        "history": {
          "0": [
            {
              "name": "session_fsm_started",
              "ts": 1511633878.5344193,
              "datetime": "2017-11-25 21:17:58.534425",
              "step_name": null
            },
            {
              "name": "session_state_created",
              "ts": 1511633878.5853348,
              "datetime": "2017-11-25 21:17:58.585336",
              "step_name": null,
              "data": {
                "id": "7882276c-13ad-421b-abfe-bf1c36105b11",
                "session_mailbox": "http://octonode-myt-test1.yndx.net:8010/sessions/7882276c-13ad-421b-abfe-bf1c36105b11/mbox",
                "state": "created",
                "phase_num": 0,
                "project_name": "CARS",
                "language": {
                  "ru": 1
                }
              }
            }
          ],
          "1": [
            {
              "name": "phase_started",
              "ts": 1511633878.5854385,
              "datetime": "2017-11-25 21:17:58.585439",
              "step_name": null
            },
            {
              "name": "session_state_updated",
              "ts": 1511633878.6121943,
              "datetime": "2017-11-25 21:17:58.612196",
              "step_name": null,
              "data": {
                "phase_num": 1,
                "project_name": "CARS",
                "session_type": "CarsharingCheck"
              }
            },
            {
              "name": "originate_started",
              "ts": 1511633878.6128654,
              "datetime": "2017-11-25 21:17:58.612867",
              "step_name": "start"
            },
            {
              "name": "initiator_progress",
              "ts": 1511633883.319933,
              "datetime": "2017-11-25 21:18:03.319937",
              "step_name": "start"
            },
            {
              "name": "conversation_started",
              "ts": 1511633895.3494897,
              "datetime": "2017-11-25 21:18:15.349494",
              "step_name": "start"
            },
            {
              "name": "recording_started",
              "ts": 1511633895.3532522,
              "datetime": "2017-11-25 21:18:15.353254",
              "step_name": "start",
              "data": {
                "filename": "/opt/octopus/spool/recordings/7882276c-13ad-421b-abfe-bf1c36105b11_phase_1_both.wav",
                "side": "both"
              }
            },
            {
              "name": "session_exception",
              "ts": 1511633895.3545852,
              "datetime": "2017-11-25 21:18:15.354587",
              "step_name": "ask_phrase",
              "data": "<class 'KeyError'> 'say_phrase' Traceback (most recent call last):\n  File \"/opt/venvs/yandex-octonode/lib/python3.6/site-packages/octonode-1.1-py3.6.egg/octonode/base/session/session.py\", line 282, in execute_fsm\n    step_result = await action\n  File \"/opt/python36/lib/python3.6/asyncio/coroutines.py\", line 109, in __next__\n    return self.gen.send(None)\n  File \"/opt/venvs/yandex-octonode/lib/python3.6/site-packages/octonode-1.1-py3.6.egg/octonode/base/session/actions/call_actions.py\", line 602, in do\n    prompt = self._get_prompt_path(prompt)\n  File \"/opt/venvs/yandex-octonode/lib/python3.6/site-packages/octonode-1.1-py3.6.egg/octonode/base/session/actions/action.py\", line 87, in _get_prompt_path\n    return self._session.get_prompt_path(prompt)\n  File \"/opt/venvs/yandex-octonode/lib/python3.6/site-packages/octonode-1.1-py3.6.egg/octonode/base/session/session.py\", line 614, in get_prompt_path\n    prompt_name = self.config['prompts'][name]\nKeyError: 'say_phrase'\n"
            },
            {
              "name": "phase_ended",
              "ts": 1511633895.3546188,
              "datetime": "2017-11-25 21:18:15.354619",
              "step_name": "ask_phrase",
              "data": "FORCED_SESSION_EXCEPTION"
            },
            {
              "name": "recording_stopped",
              "ts": 1511633895.3615448,
              "datetime": "2017-11-25 21:18:15.361547",
              "step_name": "session_end",
              "data": "/opt/octopus/spool/recordings/7882276c-13ad-421b-abfe-bf1c36105b11_phase_1_both.wav"
            },
            {
              "name": "recording_upload_failed",
              "ts": 1511633895.4092557,
              "datetime": "2017-11-25 21:18:15.409257",
              "step_name": "session_end",
              "data": {
                "bucket": "taxiout-test",
                "directory": "records",
                "file": "/opt/octopus/spool/recordings/7882276c-13ad-421b-abfe-bf1c36105b11_phase_1_both.wav",
                "error": "[Errno 2] No such file or directory: '/opt/octopus/spool/recordings/7882276c-13ad-421b-abfe-bf1c36105b11_phase_1_both.wav'"
              }
            },
            {
              "name": "session_fsm_complete",
              "ts": 1511633895.4099016,
              "datetime": "2017-11-25 21:18:15.409903",
              "step_name": null
            }
          ]
        }
      }
    },
    "id": "f656bb73-ca7e-4d99-beb4-150d7c55bfaf",
    "dt": 1511633895.4101448,
    "action_id": 40,
    "action_type": "SESSION_DUMP_STATE",
    "loglevel": 2,
    "call_handling_type": 6,
    "session_id": "7882276c-13ad-421b-abfe-bf1c36105b11",
    "step_name": null,
    "project_name": "CARS",
    "session_type": "CarsharingCheck",
    "phase_num": 1,
    "agent_id": null
  }
]
